<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Maxime SOURDIN</title><link href="https://maxime.sourdin.ovh/" rel="alternate"></link><link href="https://maxime.sourdin.ovh/atom.xml" rel="self"></link><id>https://maxime.sourdin.ovh/</id><updated>2022-07-03T18:00:00+02:00</updated><entry><title>Boot via le rescue mode (OVH)</title><link href="https://maxime.sourdin.ovh/boot-via-le-rescue-mode-ovh.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/boot-via-le-rescue-mode-ovh.html</id><summary type="html">&lt;p&gt;Installer un systéme sur un serveur limité&lt;/p&gt;</summary><content type="html">&lt;h1&gt;La commande&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;qemu-system-x86_64 -bios /usr/share/ovmf/OVMF.fd -netdev type=user,id=mynet0 -device virtio-net-pci,netdev=mynet0 -m 8096 -localtime -enable-kvm -drive index=1,media=disk,if=virtio,file=/dev/nvme1n1 -drive index=2,media=disk,if=virtio,file=/dev/nvme0n1 -vga qxl -vnc 127.0.0.1:5900 -daemonize -drive index=0,format=raw,file=proxmox.iso -boot d&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;Explications des arguments&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;qemu&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;system&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;x86_64&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bios&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;share&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ovmf&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;OVMF&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;daemonize&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;localtime&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Boot&lt;/span&gt; &lt;span class="n"&gt;sur&lt;/span&gt; &lt;span class="n"&gt;un&lt;/span&gt; &lt;span class="n"&gt;système&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;avec&lt;/span&gt; &lt;span class="n"&gt;un&lt;/span&gt; &lt;span class="n"&gt;UEFI&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;en&lt;/span&gt; &lt;span class="n"&gt;arrière&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;plan&lt;/span&gt; &lt;span class="n"&gt;et&lt;/span&gt; &lt;span class="n"&gt;averc&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;heure&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt; &lt;span class="n"&gt;pile&lt;/span&gt; &lt;span class="n"&gt;du&lt;/span&gt; &lt;span class="n"&gt;BIOS&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;netdev&lt;/span&gt; &lt;span class="k"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;mynet0&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;device&lt;/span&gt; &lt;span class="n"&gt;virtio&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pci&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;netdev&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;mynet0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Configuration&lt;/span&gt; &lt;span class="n"&gt;réseau&lt;/span&gt; &lt;span class="n"&gt;par&lt;/span&gt; &lt;span class="n"&gt;défaut&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;carte&lt;/span&gt; &lt;span class="n"&gt;réseau&lt;/span&gt; &lt;span class="n"&gt;standard&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;8096&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="k"&gt;Go&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;RAM&lt;/span&gt; &lt;span class="n"&gt;attribué&lt;/span&gt; &lt;span class="err"&gt;à&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt; &lt;span class="n"&gt;VM&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;enable&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;kvm&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;vga&lt;/span&gt; &lt;span class="n"&gt;qxl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;vnc&lt;/span&gt; &lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;5900&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Activation&lt;/span&gt; &lt;span class="n"&gt;du&lt;/span&gt; &lt;span class="n"&gt;KVM&lt;/span&gt; &lt;span class="n"&gt;et&lt;/span&gt; &lt;span class="n"&gt;accés&lt;/span&gt; &lt;span class="err"&gt;à&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt; &lt;span class="n"&gt;console&lt;/span&gt; &lt;span class="n"&gt;via&lt;/span&gt; &lt;span class="n"&gt;VNC&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;drive&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;media&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;virtio&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nvme1n1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;drive&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;media&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;virtio&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nvme0n1&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Montage&lt;/span&gt; &lt;span class="n"&gt;des&lt;/span&gt; &lt;span class="n"&gt;deux&lt;/span&gt; &lt;span class="n"&gt;disques&lt;/span&gt; &lt;span class="n"&gt;du&lt;/span&gt; &lt;span class="n"&gt;serveurs&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;drive&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;raw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;proxmox&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iso&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Montage&lt;/span&gt; &lt;span class="n"&gt;du&lt;/span&gt; &lt;span class="n"&gt;fichier&lt;/span&gt; &lt;span class="n"&gt;ISO&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;boot&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Démarrage&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt; &lt;span class="n"&gt;machine&lt;/span&gt; &lt;span class="n"&gt;virtuelle&lt;/span&gt; &lt;span class="n"&gt;directement&lt;/span&gt; &lt;span class="n"&gt;aprés&lt;/span&gt; &lt;span class="n"&gt;sa&lt;/span&gt; &lt;span class="n"&gt;création&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Sauvegarde"></category><category term="OVH"></category></entry><entry><title>Chiffrement d'un disque avec LUKS</title><link href="https://maxime.sourdin.ovh/chiffrement-dun-disque-avec-luks.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/chiffrement-dun-disque-avec-luks.html</id><summary type="html">&lt;p&gt;Chiffrer son disque simplement&lt;/p&gt;</summary><content type="html">&lt;hr&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo apt install -y crypsetup&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;hr&gt;
&lt;p&gt;Partitionnement&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;fdisk /dev/sdb&lt;/span&gt;
&lt;span class="err"&gt;n       (Créer nouvelle partition)&lt;/span&gt;
&lt;span class="err"&gt;p       (Partition primaire)&lt;/span&gt;
&lt;span class="err"&gt;1       (Numéro de partition)&lt;/span&gt;
&lt;span class="err"&gt;2048    (par défaut Début de la partition)&lt;/span&gt;
&lt;span class="err"&gt;+64G    (Taille de la partition 64Go)&lt;/span&gt;
&lt;span class="err"&gt;w       (Confirme le partitionnement du disque)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;hr&gt;
&lt;p&gt;Chiffrement&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;cryptsetup&lt;/span&gt; &lt;span class="n"&gt;luksFormat&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;c&lt;/span&gt; &lt;span class="n"&gt;aes&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="n"&gt;sha256&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sdb1&lt;/span&gt;


&lt;span class="n"&gt;WARNING&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;
&lt;span class="n"&gt;Cette&lt;/span&gt; &lt;span class="n"&gt;action&lt;/span&gt; &lt;span class="err"&gt;é&lt;/span&gt;&lt;span class="n"&gt;crasera&lt;/span&gt; &lt;span class="n"&gt;définitivement&lt;/span&gt; &lt;span class="n"&gt;les&lt;/span&gt; &lt;span class="n"&gt;données&lt;/span&gt; &lt;span class="n"&gt;sur&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sdb1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="k"&gt;Are&lt;/span&gt; &lt;span class="n"&gt;you&lt;/span&gt; &lt;span class="n"&gt;sure&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;Type&lt;/span&gt; &lt;span class="n"&gt;uppercase&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="n"&gt;YES&lt;/span&gt;
&lt;span class="n"&gt;Saisissez&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt; &lt;span class="n"&gt;phrase&lt;/span&gt; &lt;span class="n"&gt;secrète&lt;/span&gt; &lt;span class="n"&gt;pour&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sdb1&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;menezdaou&lt;/span&gt;
&lt;span class="n"&gt;Vérifiez&lt;/span&gt; &lt;span class="n"&gt;la&lt;/span&gt; &lt;span class="n"&gt;phrase&lt;/span&gt; &lt;span class="n"&gt;secrète&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;menezdaou&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;hr&gt;
&lt;p&gt;Déchiffrement du disque&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo crypsetup luksOpen /dev/sdb1 mondisque&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;hr&gt;
&lt;p&gt;Formatage&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo mkfs.ext4 /dev/mapper/mondisque&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;hr&gt;
&lt;p&gt;Montage&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo mkdir /mnt/mondisque&lt;/span&gt;
&lt;span class="err"&gt;sudo mount /dev/mapper/mondisque /mnt/mondisque&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Hardening"></category><category term="Chiffrement"></category></entry><entry><title>Commandes utiles Proxmox</title><link href="https://maxime.sourdin.ovh/commandes-utiles-proxmox.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/commandes-utiles-proxmox.html</id><summary type="html">&lt;p&gt;Quelques commandes utiles sur Proxmox&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;Stopper une sauvegarde:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;vzdump -stop&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Lister conteneurs:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;pct list&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Lister vm:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;qm list&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Bridger des interfaces:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;dans /etc/network/interfaces:
&lt;code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;lo&lt;/span&gt;
&lt;span class="n"&gt;iface&lt;/span&gt; &lt;span class="n"&gt;lo&lt;/span&gt; &lt;span class="n"&gt;inet&lt;/span&gt; &lt;span class="n"&gt;loopback&lt;/span&gt;

&lt;span class="n"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;vmbr0&lt;/span&gt;
&lt;span class="n"&gt;iface&lt;/span&gt; &lt;span class="n"&gt;vmbr0&lt;/span&gt; &lt;span class="n"&gt;inet&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt;
    &lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="mi"&gt;172&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;
    &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;248&lt;/span&gt;
    &lt;span class="n"&gt;gateway&lt;/span&gt; &lt;span class="mi"&gt;172&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="n"&gt;bridge_ports&lt;/span&gt; &lt;span class="n"&gt;eno0&lt;/span&gt;
    &lt;span class="n"&gt;bridge_stp&lt;/span&gt; &lt;span class="k"&gt;off&lt;/span&gt;
    &lt;span class="n"&gt;bridge_fd&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="n"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;vmbr1&lt;/span&gt;
&lt;span class="n"&gt;iface&lt;/span&gt; &lt;span class="n"&gt;vmbr1&lt;/span&gt; &lt;span class="n"&gt;inet&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt;
    &lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="mi"&gt;172&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="n"&gt;bridge_ports&lt;/span&gt; &lt;span class="n"&gt;eno1&lt;/span&gt;
    &lt;span class="n"&gt;bridge_stp&lt;/span&gt; &lt;span class="k"&gt;off&lt;/span&gt;
    &lt;span class="n"&gt;bridge_fd&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Mapper un dossier local de l'hyperviseur sur un container (nécessite un arrêt du conteneur):&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;pct set 500 -mp0 /home/user,mp=/etc/letsencrypt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Hyperviseur"></category><category term="Proxmox"></category></entry><entry><title>Configuration de différents serveurs Web</title><link href="https://maxime.sourdin.ovh/configuration-de-differents-serveurs-web.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/configuration-de-differents-serveurs-web.html</id><summary type="html">&lt;p&gt;Configuration httpd (openbsd)/Nginx/HaProxy&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Conf httpd (openbsd)&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;types&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/usr/share/misc/mime.types&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;}&lt;/span&gt;


&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;undomaine.com&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;8080&lt;/span&gt;
    &lt;span class="n"&gt;block&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;301&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;https://&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="n"&gt;undomaine&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;tls&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;443&lt;/span&gt;
   &lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/htdocs&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;

    &lt;span class="n"&gt;hsts&lt;/span&gt;
    &lt;span class="n"&gt;tls&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;certificate&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/etc/letsencrypt/archive/undomaine.com/fullchain1.pem&amp;quot;&lt;/span&gt;
 &lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/etc/letsencrypt/archive/undomaine.com/privkey1.pem&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;location&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;*.php&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;fastcgi&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/run/php-fpm.sock&amp;quot;&lt;/span&gt;
        &lt;span class="err"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;index.php&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;

        &lt;span class="err"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;www.undomaine.com&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;8080&lt;/span&gt;
    &lt;span class="n"&gt;block&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;301&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;https://&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;undomaine&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;tls&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;443&lt;/span&gt;
    &lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/htdocs&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="k"&gt;access&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;root.log&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;hsts&lt;/span&gt;
    &lt;span class="n"&gt;tls&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;certificate&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/etc/letsencrypt/live/www.undomaine.com/fullchain.pem&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/etc/letsencrypt/live/www.undomaine.com/privkey.pem&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;location&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;*.php*&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;fastcgi&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/run/php-fpm.sock&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;}&lt;/span&gt;
     &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;index.php&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;}&lt;/span&gt;

    &lt;span class="err"&gt;}&lt;/span&gt;



&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;blog.undomaine.com&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;8080&lt;/span&gt;
    &lt;span class="n"&gt;block&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;301&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;https://&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="n"&gt;blog&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;undomaine&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;tls&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;443&lt;/span&gt;
    &lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/htdocs/blog/&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="k"&gt;access&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;root.log&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;hsts&lt;/span&gt;
    &lt;span class="n"&gt;tls&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;certificate&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/etc/letsencrypt/live/blog.undomaine.com/fullchain.pem&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/etc/letsencrypt/live/blog.undomaine.com/privkey.pem&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;location&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;*.php&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;fastcgi&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/run/php-fpm.sock&amp;quot;&lt;/span&gt;
        &lt;span class="err"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;index.php&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;

    &lt;span class="err"&gt;}&lt;/span&gt;


&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;chat.undomaine.com&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;8080&lt;/span&gt;
 &lt;span class="n"&gt;block&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;301&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;https://&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="n"&gt;chat&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;undomaine&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;tls&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;443&lt;/span&gt;
    &lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/htdocs/chat/&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="k"&gt;access&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;root.log&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;hsts&lt;/span&gt;
    &lt;span class="n"&gt;tls&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;certificate&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/etc/letsencrypt/live/chat.undomaine.com/fullchain.pem&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/etc/letsencrypt/live/chat.undomaine.com/privkey.pem&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;location&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;*.php&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;fastcgi&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/run/php-fpm.sock&amp;quot;&lt;/span&gt;
        &lt;span class="err"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;index.php&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;


&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;bin.undomaine.com&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;8080&lt;/span&gt;
    &lt;span class="n"&gt;block&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;301&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;https://&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;undomaine&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt; &lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;tls&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="mi"&gt;443&lt;/span&gt;
    &lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/htdocs/privatebin/&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;log&lt;/span&gt; &lt;span class="k"&gt;access&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;root.log&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;hsts&lt;/span&gt;
    &lt;span class="n"&gt;tls&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;certificate&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/etc/letsencrypt/live/bin.undomaine.com/fullchain.pem&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/etc/letsencrypt/live/bin.undomaine.com/privkey.pem&amp;quot;&lt;/span&gt;
    &lt;span class="err"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;location&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;*.php&amp;quot;&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;fastcgi&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;/run/php-fpm.sock&amp;quot;&lt;/span&gt;
        &lt;span class="err"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt; &lt;span class="k"&gt;index&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;index.php&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;

 &lt;span class="err"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Réseau"></category><category term="ServeursWeb"></category></entry><entry><title>Configuration réseau de relai wifi sur OpenWRT</title><link href="https://maxime.sourdin.ovh/configuration-reseau-de-relai-wifi-sur-openwrt.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/configuration-reseau-de-relai-wifi-sur-openwrt.html</id><summary type="html">&lt;p&gt;Relai Wifi&lt;/p&gt;</summary><content type="html">&lt;h1&gt;/etc/config/wireless&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;wifi&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;device&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;radio0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;mac80211&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;hwmode&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;11g&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;platform/10300000.wmac&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;htmode&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;HT20&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;country&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;00&amp;#39;&lt;/span&gt;

     &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;legacy_rates&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;channel&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;6&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;wifi&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;iface&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;wifirep&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ssid&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Livebox-442c&amp;#39;&lt;/span&gt;

&lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;encryption&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;psk2&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;device&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;radio0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="k"&gt;mode&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;sta&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;bssid&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;$BSSID&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39; &amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;/etc/config/network&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;loopback&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ifname&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lo&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;proto&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;static&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ipaddr&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;127.0.0.1&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;255.0.0.0&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;globals&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;globals&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ula_prefix&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;fdee:45b4:8e97::/48&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lan&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="k"&gt;type&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bridge&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ifname&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;eth0.1&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;proto&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;static&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;255.255.255.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ip6assign&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;60&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ipaddr&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;192.168.1.1&amp;#39;&lt;/span&gt;
        &lt;span class="n"&gt;list&lt;/span&gt; &lt;span class="n"&gt;dns&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.1.2&amp;#39;&lt;/span&gt;
        &lt;span class="n"&gt;list&lt;/span&gt; &lt;span class="n"&gt;dns&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;80.67.169.12&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;device&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lan_dev&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;eth0.1&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;macaddr&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;c4:71:54:39:63:d2&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;wan&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ifname&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;eth0.2&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;proto&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;dhcp&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;device&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;wan_dev&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;eth0.2&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;macaddr&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;$MAC_ADDR&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;wan6&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ifname&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;eth0.2&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;proto&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;dhcpv6&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;switch&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;switch0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="k"&gt;reset&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;enable_vlan&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;switch_vlan&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;device&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;switch0&amp;#39;&lt;/span&gt;

 &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;vlan&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ports&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1 2 3 4 6t&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;switch_vlan&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;device&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;switch0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;vlan&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;2&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ports&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0&lt;/span&gt;
&lt;span class="s1"&gt;6t&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bridge_wifi&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;proto&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;relay&amp;#39;&lt;/span&gt;
        &lt;span class="n"&gt;list&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lan&amp;#39;&lt;/span&gt;
        &lt;span class="n"&gt;list&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;wifirep&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;wifirep&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;proto&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;static&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;ipaddr&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.14.3&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;255.255.255.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;gateway&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.14.254&amp;#39;&lt;/span&gt;

 &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;broadcast&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.14.255&amp;#39;&lt;/span&gt;
        &lt;span class="n"&gt;list&lt;/span&gt; &lt;span class="n"&gt;dns&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.1.2&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;route&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lan&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0.0.0.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0.0.0.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;gateway&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.14.254&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;route&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lan&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.1.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;255.255.255.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;gateway&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.14.254&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;route&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lan&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.0.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;255.255.255.248&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;gateway&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.14.254&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;route&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;lan&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.15.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;gateway&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.14.254&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;255.255.255.0&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;route&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bridge_wifi&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0.0.0.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0.0.0.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;gateway&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.14.254&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;route&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;interface&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bridge_wifi&amp;#39;&lt;/span&gt;

 &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.1.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;255.255.255.0&amp;#39;&lt;/span&gt;
        &lt;span class="k"&gt;option&lt;/span&gt; &lt;span class="n"&gt;gateway&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;172.16.1.254&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Réseau"></category><category term="Openwrt"></category></entry><entry><title>Configuration réseau sur un serveur dédié OVH, avec une IP failover</title><link href="https://maxime.sourdin.ovh/configuration-reseau-sur-un-serveur-dedie-ovh-avec-une-ip-failover.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/configuration-reseau-sur-un-serveur-dedie-ovh-avec-une-ip-failover.html</id><summary type="html">&lt;p&gt;Configurer "facilement" son IP failover&lt;/p&gt;</summary><content type="html">&lt;h2&gt;RedHat/CentOS&lt;/h2&gt;
&lt;p&gt;ifcfg-eno1&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;BOOTPROTO=dhcp&lt;/span&gt;
&lt;span class="err"&gt;DEVICE=eno1&lt;/span&gt;
&lt;span class="err"&gt;HWADDR= $MAC_ADDRESS_ENO1&lt;/span&gt;
&lt;span class="err"&gt;ONBOOT=yes&lt;/span&gt;
&lt;span class="err"&gt;STARTMODE=auto&lt;/span&gt;
&lt;span class="err"&gt;TYPE=Ethernet&lt;/span&gt;
&lt;span class="err"&gt;USERCTL=no&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ifcfg-eno2&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;IPADDR=$IP_FAILOVER&lt;/span&gt;
&lt;span class="err"&gt;NETMASK=255.255.255.255&lt;/span&gt;
&lt;span class="err"&gt;BROADCAST=$IP_FAILOVER&lt;/span&gt;
&lt;span class="err"&gt;ONBOOT=yes&lt;/span&gt;
&lt;span class="err"&gt;TYPE=Ethernet&lt;/span&gt;
&lt;span class="err"&gt;PROXY_METHOD=none&lt;/span&gt;
&lt;span class="err"&gt;BROWSER_ONLY=no&lt;/span&gt;
&lt;span class="err"&gt;PREFIX=32&lt;/span&gt;
&lt;span class="err"&gt;DEFROUTE=yes&lt;/span&gt;
&lt;span class="err"&gt;IPV4_FAILURE_FATAL=no&lt;/span&gt;
&lt;span class="err"&gt;IPv6INIT=yes&lt;/span&gt;
&lt;span class="err"&gt;NAME=&amp;quot;System eno2:0&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;UUID=f8744e88-b2f8-de69-4797-e33eead3a435&lt;/span&gt;
&lt;span class="err"&gt;BOOTPROTO=none&lt;/span&gt;
&lt;span class="err"&gt;ZONE=web&lt;/span&gt;
&lt;span class="err"&gt;IPV6INIT=yes&lt;/span&gt;
&lt;span class="err"&gt;IPV6_AUTOCONF=no&lt;/span&gt;
&lt;span class="err"&gt;IPV6ADDR=$IPV6/56&lt;/span&gt;
&lt;span class="err"&gt;IPV6_DEFROUTE=yes&lt;/span&gt;
&lt;span class="err"&gt;IPV6_FAILURE_FATAL=no&lt;/span&gt;
&lt;span class="err"&gt;IPV6_ADDR_GEN_MODE=stable-privacy&lt;/span&gt;
&lt;span class="err"&gt;IPV6_DEFAULTGW=$GW_IPV6&lt;/span&gt;
&lt;span class="err"&gt;IPV6_PEERROUTES=no&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Ubuntu&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;This&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="k"&gt;generated&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt; &lt;span class="n"&gt;provided&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;datasource&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;  &lt;span class="n"&gt;Changes&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="n"&gt;will&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;persist&lt;/span&gt; &lt;span class="n"&gt;across&lt;/span&gt; &lt;span class="n"&gt;an&lt;/span&gt; &lt;span class="n"&gt;instance&lt;/span&gt; &lt;span class="n"&gt;reboot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;  &lt;span class="k"&gt;To&lt;/span&gt; &lt;span class="n"&gt;disable&lt;/span&gt; &lt;span class="n"&gt;cloud&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt; &lt;span class="n"&gt;configuration&lt;/span&gt; &lt;span class="n"&gt;capabilities&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;write&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cloud&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cloud&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cfg&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;99&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;disable&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;network&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cfg&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;following&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;
&lt;span class="n"&gt;network&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="n"&gt;ethernets&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;eno1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;dhcp4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;true&lt;/span&gt;
            &lt;span class="k"&gt;match&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;macaddress&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;MAC_ADDRESS_ENO1&lt;/span&gt;
            &lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;eno1&lt;/span&gt;
            &lt;span class="n"&gt;nameservers&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;addresses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

        &lt;span class="n"&gt;eno2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;addresses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;IP_FAILOVER&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;
            &lt;span class="n"&gt;optional&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;true&lt;/span&gt;
            &lt;span class="n"&gt;dhcp4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;false&lt;/span&gt;
            &lt;span class="k"&gt;match&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;macaddress&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;MAC_FAILOVER&lt;/span&gt;
            &lt;span class="k"&gt;set&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;eno2&lt;/span&gt;
            &lt;span class="n"&gt;nameservers&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;addresses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;127&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Réseau"></category><category term="OVH"></category></entry><entry><title>Configuration SSH, mode hardening</title><link href="https://maxime.sourdin.ovh/configuration-ssh-mode-hardening.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/configuration-ssh-mode-hardening.html</id><summary type="html">&lt;p&gt;Configuration simple et solide de SSH&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Serveur&lt;/h1&gt;
&lt;h2&gt;/etc/ssh/sshd_config&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;Port 2417&lt;/span&gt;
&lt;span class="err"&gt;ListenAddress 0.0.0.0&lt;/span&gt;
&lt;span class="err"&gt;HostKey &amp;quot;/etc/ssh/ssh_host_ed25519_key&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;KexAlgorithms curve25519-sha256@libssh.org,diffie-hellman-group-exchange-sha256&lt;/span&gt;
&lt;span class="err"&gt;Ciphers aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr&lt;/span&gt;
&lt;span class="err"&gt;MACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,umac-128-etm@openssh.com&lt;/span&gt;
&lt;span class="err"&gt;LogLevel VERBOSE&lt;/span&gt;
&lt;span class="err"&gt;AuthenticationMethods publickey&lt;/span&gt;
&lt;span class="err"&gt;LoginGraceTime 5m&lt;/span&gt;
&lt;span class="err"&gt;PermitRootLogin no&lt;/span&gt;
&lt;span class="err"&gt;MaxAuthTries 2&lt;/span&gt;
&lt;span class="err"&gt;MaxSessions 6&lt;/span&gt;
&lt;span class="err"&gt;PubkeyAuthentication yes&lt;/span&gt;
&lt;span class="err"&gt;PermitEmptyPasswords no&lt;/span&gt;
&lt;span class="err"&gt;ChallengeResponseAuthentication yes&lt;/span&gt;
&lt;span class="err"&gt;UsePAM yes&lt;/span&gt;
&lt;span class="err"&gt;X11Forwarding no&lt;/span&gt;
&lt;span class="err"&gt;X11UseLocalhost no&lt;/span&gt;
&lt;span class="err"&gt;PrintMotd no&lt;/span&gt;
&lt;span class="err"&gt;Compression no&lt;/span&gt;
&lt;span class="err"&gt;AllowTcpForwarding yes&lt;/span&gt;
&lt;span class="err"&gt;GatewayPorts yes&lt;/span&gt;
&lt;span class="err"&gt;ClientAliveCountMax 2&lt;/span&gt;
&lt;span class="err"&gt;TCPKeepAlive no&lt;/span&gt;
&lt;span class="err"&gt;AllowAgentForwarding no&lt;/span&gt;
&lt;span class="err"&gt;AcceptEnv LANG LC_*&lt;/span&gt;
&lt;span class="err"&gt;Subsystem sftp /usr/lib/ssh/sftp-server -f AUTHPRIV -l INFO&lt;/span&gt;
&lt;span class="err"&gt;UseDNS no&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;Client&lt;/h1&gt;
&lt;h2&gt;Génération de la clé publique et de la clé privée, en utilisant l’algo ed25519, avec une clé de 4096 bits&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;keygen&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ed25519&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;4096&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="n"&gt;Generating&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ed25519&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pair&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;file&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;which&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;save&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Users&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_ed25519&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;empty&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;no&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;Enter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;passphrase&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;again&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;Your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;identification&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;has&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;been&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;saved&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Users&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_ed25519&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;Your&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;has&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;been&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;saved&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Users&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;pc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_ed25519&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fingerprint&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nl"&gt;SHA256&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;trucbidule&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pc&lt;/span&gt;&lt;span class="nv"&gt;@monpc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;The&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;randomart&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;image&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;+--[&lt;/span&gt;&lt;span class="n"&gt;ED25519 256&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="err"&gt;—&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="c1"&gt;----[SHA256]-----+&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;On a ces deux clés, il faut désormais transférer la clé publique:&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;id_ed25519&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;user&lt;/span&gt;&lt;span class="nv"&gt;@monip&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;6666&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;


&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nl"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;INFO&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;installed&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;.ssh/id_ed25519.pub&amp;quot;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nl"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;INFO&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;attempting&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;log&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;filter&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;out&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;any&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;are&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;already&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;installed&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ssh&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nl"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nl"&gt;INFO&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;remain&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;installed&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;you&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;are&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;prompted&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;user&lt;/span&gt;&lt;span class="nv"&gt;@monip&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;s password:&lt;/span&gt;

&lt;span class="s1"&gt;Number of key(s) added:        1&lt;/span&gt;

&lt;span class="s1"&gt;Now try logging into the machine, with:   &amp;quot;ssh -p &amp;#39;&lt;/span&gt;&lt;span class="mi"&gt;6666&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39; ‘user@monip&amp;#39;&lt;/span&gt;&lt;span class="err"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;check&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;make&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sure&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;that&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;only&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;you&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;wanted&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;were&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;added&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;On peut désormais se connecter avec une passphrase:&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;ssh -p &amp;#39;6666&amp;#39; ‘user@monip&amp;#39;&lt;/span&gt;
&lt;span class="err"&gt;Enter passphrase for key &amp;#39;/Users/pc/.ssh/id_ed25519&amp;#39;:&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;C'est bon !&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;user@servssh:~$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Hardening"></category><category term="SSH"></category></entry><entry><title>Configurer Unbound</title><link href="https://maxime.sourdin.ovh/configurer-unbound.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/configurer-unbound.html</id><summary type="html">&lt;p&gt;Configuration simple d'unbound&lt;/p&gt;</summary><content type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;verbosity&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
        &lt;span class="kd"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;192.168&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;1.2&lt;/span&gt;
        &lt;span class="kd"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;do&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ip6&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
        &lt;span class="k"&gt;do&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ip4&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
        &lt;span class="k"&gt;do&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
        &lt;span class="k"&gt;do&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;

    &lt;span class="n"&gt;access&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;control&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;192.168&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt;
    &lt;span class="n"&gt;access&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;control&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt;
    &lt;span class="n"&gt;access&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;control&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;127.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt;
    &lt;span class="n"&gt;access&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;control&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;allow&lt;/span&gt;

    &lt;span class="n"&gt;hide&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;identity&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;harden&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;algo&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;downgrade&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;no&lt;/span&gt;
    &lt;span class="n"&gt;harden&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;glue&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;hide&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;harden&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;below&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;nxdomain&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;trust&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;anchor&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/var/lib/unbound/root.key&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;hints&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;/var/lib/unbound/root.hints&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;validator iterator&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;prefetch&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;prefetch&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;qname&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;minimisation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;harden&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dnssec&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stripped&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;caps&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ttl&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3600&lt;/span&gt;
    &lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ttl&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;86400&lt;/span&gt;
    &lt;span class="n"&gt;prefetch&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;threads&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
    &lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;slabs&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;
    &lt;span class="n"&gt;rrset&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;slabs&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;
    &lt;span class="n"&gt;infra&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;slabs&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;
    &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;slabs&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;
    &lt;span class="n"&gt;rrset&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;
    &lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;128&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;
    &lt;span class="n"&gt;so&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;rcvbuf&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;
    &lt;span class="n"&gt;unwanted&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;reply&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;threshold&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10000&lt;/span&gt;
    &lt;span class="k"&gt;do&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;not&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;localhost&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;clean&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;additional&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;syslog&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
    &lt;span class="n"&gt;logfile&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="sr"&gt;/var/log/&lt;/span&gt;&lt;span class="n"&gt;unbound&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;log&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Réseau"></category><category term="DNS"></category></entry><entry><title>Créer, publier et imprimer son CV avec JsonResume</title><link href="https://maxime.sourdin.ovh/creer-publier-et-imprimer-son-cv-avec-jsonresume.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/creer-publier-et-imprimer-son-cv-avec-jsonresume.html</id><summary type="html">&lt;p&gt;Automatiser la production de son CV&lt;/p&gt;</summary><content type="html">&lt;p&gt;Quelques prérequis:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;un bucket S3 (sur n'importe quel service compatible)&lt;/li&gt;
&lt;li&gt;une instance Gitlab fonctionnelle&lt;/li&gt;
&lt;li&gt;un &lt;a href="https://www.sheevaboite.fr/articles/installer-gitlab-ci-moins-5-minutes-docker/"&gt;runner Gitlab&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Docker ou Podman&lt;/li&gt;
&lt;li&gt;un nom de domaine&lt;/li&gt;
&lt;li&gt;un compte AWS&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Premiére méthode: gitlab-ci&lt;/h1&gt;
&lt;h2&gt;I- Édition d'un fichier resume.json&lt;/h2&gt;
&lt;p&gt;Pour commencer il faut d'abord éditer un fichier resume.json, qui contient toutes les données de son CV, vous trouverez ici &lt;a href="https://gist.github.com/ishu3101/36186df161316ec00519389b9deec690"&gt;un exemple&lt;/a&gt; propre.&lt;/p&gt;
&lt;p&gt;Globalement, faites attention à la &lt;a href="https://gist.github.com/mattcone/ec8057127a0ff2e0b45d2cde14355b2a"&gt;syntaxe JSON&lt;/a&gt; et aux alignements, et respectez le nom des catégories, pour évitez des erreurs. L'utilisation d'un vérificateur de syntaxe JSON est recommandée.&lt;/p&gt;
&lt;p&gt;Un exemple avec mon &lt;a href="https://gitlab.sourdin.ovh/sitespro/website/-/raw/main/resume.json"&gt;fichier resume.json&lt;/a&gt; (un peu abrégé):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;{&lt;/span&gt;
&lt;span class="err"&gt;  &amp;quot;basics&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;name&amp;quot;: &amp;quot;Maxime SOURDIN&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;label&amp;quot;: &amp;quot;21 years old, apprenticeship  at OBS (cloud specialist)&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;picture&amp;quot;: &amp;quot;profile.jpeg&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;email&amp;quot;: &amp;quot;maxime@sourdin.ovh&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;phone&amp;quot;: &amp;quot;+33630158452&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;website&amp;quot;: &amp;quot;https://maxime.sourdin.ovh&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;location&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;address&amp;quot;: &amp;quot;33 Rue de la Grande Fontaine&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;postalCode&amp;quot;: &amp;quot;35490&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;city&amp;quot;: &amp;quot;Romazy&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;countryCode&amp;quot;: &amp;quot;FR&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;region&amp;quot;: &amp;quot;Bretagne&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;    },&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;profiles&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;      {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;network&amp;quot;: &amp;quot;Shaarli&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;iconClass&amp;quot;: &amp;quot;fa fa-shaarli-square&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;url&amp;quot;: &amp;quot;https://links.maxime.sourdin.ovh&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;      }&lt;/span&gt;
&lt;span class="err"&gt;    ]&lt;/span&gt;
&lt;span class="err"&gt;  },&lt;/span&gt;
&lt;span class="err"&gt;  &amp;quot;work&amp;quot;: [{&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;position&amp;quot;: &amp;quot;Apprenticeship at OBS&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;startDate&amp;quot;: &amp;quot;2020-09&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;summary&amp;quot;: &amp;quot;Automated test chain: Ansible, AWX, Gitlab-ci, Flexible Engine&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;highlights&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;      ]&lt;/span&gt;
&lt;span class="err"&gt;    }&lt;/span&gt;
&lt;span class="err"&gt;  ],&lt;/span&gt;
&lt;span class="err"&gt;  &amp;quot;education&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;    {&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;institution&amp;quot;: &amp;quot;CNAM &amp;amp; OBS&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;area&amp;quot;: &amp;quot;Cloud specialist&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;startDate&amp;quot;: &amp;quot;2020-09&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;studyType&amp;quot;: &amp;quot;Engineer school&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;    }&lt;/span&gt;
&lt;span class="err"&gt;  ],&lt;/span&gt;
&lt;span class="err"&gt;  &amp;quot;skills&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;    {&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;name&amp;quot;: &amp;quot;Devops&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;keywords&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;Ansible&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;AWX&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;Gitlab&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;CI/CD&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;Docker&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;Podman&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;Docker Swarm&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;      ]&lt;/span&gt;
&lt;span class="err"&gt;    }&lt;/span&gt;
&lt;span class="err"&gt;  ],&lt;/span&gt;
&lt;span class="err"&gt;  &amp;quot;languages&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;    {&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;language&amp;quot;: &amp;quot;English&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;level&amp;quot;: &amp;quot;TOEIC: 620&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;      &amp;quot;fluency&amp;quot;: &amp;quot;TOEIC: 620&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;    }&lt;/span&gt;
&lt;span class="err"&gt;  ]&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;II- Choix d'un thème JSONResume&lt;/h2&gt;
&lt;p&gt;Vous pouvez trouvez des thèmes n'importe où, &lt;a href="https://www.npmjs.com/search?q=jsonresume-theme"&gt;beaucoup sont installables directement&lt;/a&gt; via le gestionnaire de paquets nodeJS. Sinon, beaucoup sont trouvables sur Github, et installables plutôt facilement. Dans tout les cas, ce ne sera pas un soucis pour la suite.&lt;/p&gt;
&lt;p&gt;Dans mon cas, j'ai cloné le code du &lt;a href="https://github.com/rbardini/jsonresume-theme-even"&gt;thème "Even"&lt;/a&gt;,  dont j'ai seulement modifié les couleurs pour le rendre plus accessible aux personnes malvoyantes.&lt;/p&gt;
&lt;p&gt;Le code est disponible &lt;a href="https://gitlab.sourdin.ovh/sitespro/website"&gt;ici&lt;/a&gt; (oui c'est en vrac).&lt;/p&gt;
&lt;h2&gt;III- Compilation de l'image Docker de l'export en PDF&lt;/h2&gt;
&lt;p&gt;J'ai utilisé le travail de &lt;a href="https://github.com/pinkeen/docker-html-to-pdf"&gt;pinkeen&lt;/a&gt; et ait recompilé l'image de mon côté, en mettant à jour juste quelques dépendances (&lt;a href="https://gitlab.sourdin.ovh/sitespro/docker-html-to-pdf"&gt;c'est stocké sur mon gitlab&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Vous pouvez cloner mon repository et ajuster certaines valeurs:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;git clone https://gitlab.sourdin.ovh/sitespro/docker-html-to-pdf&lt;/span&gt;
&lt;span class="err"&gt;cd docker-html-to-pdf&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Il s'agit surtout du fichier Dockerfile à modifier:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;FROM alpine:latest
RUN apk update \
   &lt;span class="err"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apk add --no-cache \
     chromium \
     nodejs \
     npm \
     sed \
     bash \
     procps
RUN npm install -g \
     chrome-headless-render-pdf \
     node-static
COPY entrypoint.bash /usr/local/bin/entrypoint
COPY chrome-wrapper.bash /usr/local/bin/chrome-wrapper
RUN mkdir /tmp/html-to-pdf \
   &lt;span class="err"&gt;&amp;amp;&amp;amp;&lt;/span&gt; chmod +x /usr/local/bin/*
ARG WORKDIR=&amp;quot;/builds/sitespro/website/public&amp;quot;
ENV WORKDIR=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;
WORKDIR &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;
ENTRYPOINT [ &amp;quot;/usr/local/bin/entrypoint&amp;quot; ]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;La partie à modifier est celle-ci. C'est normalement une mauvaise pratique, vu que l'image Docker ne sera pas vraiment réutilisable, mais c'est vraiment par facilité ici.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;    ARG WORKDIR=&amp;quot;/builds/sitespro/website/public&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Il suffit de suivre cette forme:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;ARG WORKDIR=&amp;quot;/builds/$NOMUTILISATEUR·ICE ou GROUPE/$NOM DU REPO/public&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Enfin, il suffit de compiler l'image Docker qui va bien, et si vous la créez à distance, la push:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;docker build -t monrepo/htmltopdf .&lt;/span&gt;
&lt;span class="err"&gt;docker push monrepo/htmltopdf&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sur un Mac M1, pour la build (testé de mon côté sur un Mini M1, avec absolument aucun probléme de build) :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;docker buildx build --platform linux/amd64 -t monrepo/htmltopdf --push .&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;IV- Configuration d'un bucket S3 et édition de la chaîne CI&lt;/h2&gt;
&lt;h3&gt;A- S3&lt;/h3&gt;
&lt;p&gt;Pensez tout d'abord à créer un repository Gitlab vide. Il va falloir renseignez quelques variables (protégées et masquées) pour pouvoir stocker les fichiers sur S3, toutefois, cette méthode est discutable niveau sécurité:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BUCKET_NAME (le nom du bucket, qui sera accessible en public)&lt;/li&gt;
&lt;li&gt;AWS_ACCESS_KEY_ID (l'identifiant de l'utilisateur·ice)&lt;/li&gt;
&lt;li&gt;AWS_DEFAULT_REGION (la région du bucket)&lt;/li&gt;
&lt;li&gt;AWS_SECRET_ACCESS_KEY (l'access key pour l'utilisateur·ice)&lt;/li&gt;
&lt;li&gt;COMPILATIONPATH (l'emplacement du code: soit   &lt;code&gt;/builds/$NOMUTILISATEUR·ICE ou GROUPE/$NOM DU REPO/&lt;/code&gt; )&lt;/li&gt;
&lt;li&gt;IMAGE (le nom de l'image compilée précédemment)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Un exemple de stratégie IAM pour gérer le bucket:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;Version&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2012-10-17&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;Statement&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Sid&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;VisualEditor0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Effect&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Allow&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Action&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:PutObject&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:GetObject&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:DeleteObject&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Resource&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket/*&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket/*&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Sid&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;VisualEditor1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Effect&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Allow&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Action&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:ListBucketMultipartUploads&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:AbortMultipartUpload&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:ListMultipartUploadParts&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Resource&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket/*&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Sid&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;VisualEditor2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Effect&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Allow&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Action&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:ListBucketMultipartUploads&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:AbortMultipartUpload&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:ListMultipartUploadParts&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Resource&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket/*&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Et la stratégie de bucket:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;{&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;Version&amp;quot;: &amp;quot;2012-10-17&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;Statement&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;        {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Sid&amp;quot;: &amp;quot;PublicReadGetObject&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Effect&amp;quot;: &amp;quot;Allow&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Principal&amp;quot;: &amp;quot;*&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Action&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;s3:GetObject&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;s3:GetObjectVersion&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            ],&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Resource&amp;quot;: &amp;quot;arn:aws:s3:::akia42ti3uitzaacfvxq-cv/*&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;    ]&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;B- Édition de la chaîne CI&lt;/h3&gt;
&lt;h4&gt;Code&lt;/h4&gt;
&lt;p&gt;Il faut maintenant éditer un fichier .gitlab-ci.yml&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nl"&gt;stages&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;pdf&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;deploy&lt;/span&gt;

&lt;span class="nl"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
 &lt;span class="nl"&gt;paths&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
   &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;builds&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;$COMPILATIONPATH&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;node_modules&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
   &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;builds&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;$COMPILATIONPATH&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;

&lt;span class="nl"&gt;htmlgen&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
 &lt;span class="nl"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nl"&gt;node&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;lts&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;alpine3&lt;/span&gt;&lt;span class="mf"&gt;.13&lt;/span&gt;
 &lt;span class="nl"&gt;stage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;
 &lt;span class="nl"&gt;before_script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;apk&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;no&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt; &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;nodejs&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;npm&lt;/span&gt;
 &lt;span class="nl"&gt;artifacts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nl"&gt;paths&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;builds&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;$COMPILATIONPATH&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;
  &lt;span class="nl"&gt;expire_in&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt; &lt;span class="n"&gt;minutes&lt;/span&gt;
 &lt;span class="nl"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;init&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;resume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt;&lt;span class="mf"&gt;@3.0.0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;
  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;nodejs&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;node_modules&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;resume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt; &lt;span class="n"&gt;export&lt;/span&gt; &lt;span class="n"&gt;public&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;theme&lt;/span&gt; &lt;span class="n"&gt;even&lt;/span&gt;

&lt;span class="nl"&gt;pdfgen&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
 &lt;span class="nl"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
   &lt;span class="nl"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;$IMAGE&lt;/span&gt;
   &lt;span class="nl"&gt;entrypoint&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/usr/local/bin/entrypoint&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;--scale 0.70 --url file:///builds/$COMPILATIONPATH/public/index.html --pdf cv.pdf&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
 &lt;span class="nl"&gt;stage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;pdf&lt;/span&gt;
 &lt;span class="nl"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt;
 &lt;span class="nl"&gt;artifacts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nl"&gt;paths&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;builds&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;$COMPILATIONPATH&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;
  &lt;span class="nl"&gt;expire_in&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt; &lt;span class="n"&gt;minutes&lt;/span&gt;
 &lt;span class="nl"&gt;when&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;on_success&lt;/span&gt;
 &lt;span class="nl"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;htmlgen&lt;/span&gt;

&lt;span class="nl"&gt;tos3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
 &lt;span class="nl"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nl"&gt;python&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;alpine&lt;/span&gt;
 &lt;span class="nl"&gt;stage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;deploy&lt;/span&gt;
 &lt;span class="nl"&gt;before_script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;awscli&lt;/span&gt;
 &lt;span class="nl"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;aws&lt;/span&gt; &lt;span class="n"&gt;s3&lt;/span&gt; &lt;span class="n"&gt;cp&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;builds&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;$COMPILATIONPATH&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="nl"&gt;s3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//${BUCKET_NAME}/&lt;/span&gt;
  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;aws&lt;/span&gt; &lt;span class="n"&gt;s3&lt;/span&gt; &lt;span class="n"&gt;cp&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;builds&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;$COMPILATIONPATH&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;public&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt; &lt;span class="nl"&gt;s3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//${BUCKET_NAME}/&lt;/span&gt;
 &lt;span class="nl"&gt;environment&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nl"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;CI_COMMIT_REF_SLUG&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="nl"&gt;url&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nl"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//${BUCKET_NAME}.s3-website.${AWS_DEFAULT_REGION}.amazonaws.com/&lt;/span&gt;
 &lt;span class="nl"&gt;when&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;on_success&lt;/span&gt;
 &lt;span class="nl"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;pdfgen&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;Comment se déroule cette chaîne ?&lt;/h4&gt;
&lt;p&gt;Première étape:
Tout simplement, le premier stage récupère la dernière image Docker nodejs (fonctionnant avec Alpine pour des questions de légèreté).   Enfin les dépendances sont installées (donc resume-cli) et le thème. La version de resume-cli est la 3.0.0 pour cause de bugs non résolus avec les versions suivantes (3.0.4 en avril 2021).&lt;/p&gt;
&lt;p&gt;Si vous récupérez un thème distant, il faut remplacer &lt;code&gt;npm init -y &amp;amp;&amp;amp; npm install resume-cli@3.0.0 &amp;amp;&amp;amp; npm install&lt;/code&gt; par &lt;code&gt;npm init -y &amp;amp;&amp;amp; npm install resume-cli@3.0.0 &amp;amp;&amp;amp; npm install jsonresume-theme-even&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Enfin, le CV est exporté en HTML dans le dossier public, qui est mis en cache.&lt;/p&gt;
&lt;p&gt;Seconde étape:
Un conteneur Docker est lancé avec l'image Docker crée plus tôt, et génère une version PDF, grâce à la version cli de Chrome, toujours dans le dossier public, en se basant sur le fichier index.html de la première étape.&lt;/p&gt;
&lt;p&gt;Troisième étape:
Un autre conteneur est lancé, sous Alpine, et installe les outils cli pour uploader directement des fichiers sur AWS.&lt;/p&gt;
&lt;h2&gt;V- Création d'un repo de stockage du code&lt;/h2&gt;
&lt;p&gt;Si vous avez récupéré le code d'un thème, vous pouvez le gardez dans un coin, et ajouter votre fichier resume.json dedans. 
Petite astuce: ajoutez un dossier public pour permettre le stockage des fichiers généré:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;mkdir public&lt;/span&gt;
&lt;span class="err"&gt;touch public/.hello&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Puis effacer le dossier .git, et faire un git add sur tout les fichiers nécessaires au bon fonctionnement du thème:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;resume.json&lt;/li&gt;
&lt;li&gt;bin/&lt;/li&gt;
&lt;li&gt;index.js&lt;/li&gt;
&lt;li&gt;.gitlab-ci.yml&lt;/li&gt;
&lt;li&gt;netlify.toml&lt;/li&gt;
&lt;li&gt;package-lock.json&lt;/li&gt;
&lt;li&gt;package.json&lt;/li&gt;
&lt;li&gt;partials/&lt;/li&gt;
&lt;li&gt;resume.hbs&lt;/li&gt;
&lt;li&gt;style.css&lt;/li&gt;
&lt;li&gt;tap-snapshots&lt;/li&gt;
&lt;li&gt;public&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ensuite, vous pouvez push le code sur votre repo Gitlab.&lt;/p&gt;
&lt;h2&gt;VI- Lancement de la chaîne&lt;/h2&gt;
&lt;p&gt;A chaque commit, la chaîne se relancera, et recompilera votre CV en HTML et en PDF.&lt;/p&gt;
&lt;h2&gt;VII- Publication via Cloudfront&lt;/h2&gt;
&lt;p&gt;Pour publier le site, une distribution Cloudfront doit être crée et pointer sur le bucket S3. Le &lt;a href="https://aws.amazon.com/fr/premiumsupport/knowledge-center/cloudfront-serve-static-website/"&gt;tutoriel AWS&lt;/a&gt; sera plus clair que mes explications.&lt;/p&gt;
&lt;p&gt;Enfin le site sera accessible publiquement, si vous ajoutez un enregistrement CNAME sur votre nom de domaine pour pointer vers la distribution CloudFront, avec évidemment un certificat SSL propre correspondant à votre nom de domaine.&lt;/p&gt;
&lt;p&gt;Évidemment, c'est la configuration de base donc peu sécurisée et performante, mais suffisante pour proposer deux fichiers.&lt;/p&gt;
&lt;h1&gt;docker-compose&lt;/h1&gt;
&lt;p&gt;Vous pouvez reprendre la partie I, II et III&lt;/p&gt;
&lt;h2&gt;IV alternatif&lt;/h2&gt;
&lt;h3&gt;Compilation de l'image Docker pour utiliser jsonresume&lt;/h3&gt;
&lt;p&gt;Après avoir récupérer le code du thème, vous pouvez modifier le nom de celui-ci dans ce Dockerfile pour que cela soit cohérent:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;FROM&lt;/span&gt; &lt;span class="nl"&gt;node&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;current&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;alpine3&lt;/span&gt;&lt;span class="mf"&gt;.13&lt;/span&gt;
&lt;span class="n"&gt;LABEL&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;jsonresume&lt;/span&gt;
&lt;span class="n"&gt;ENV&lt;/span&gt; &lt;span class="n"&gt;RESUME_PUPPETEER_NO_SANDBOX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="n"&gt;WORKDIR&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;
&lt;span class="n"&gt;RUN&lt;/span&gt; &lt;span class="n"&gt;apk&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;no&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="n"&gt;nodejs&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;git&lt;/span&gt; &lt;span class="n"&gt;chromium&lt;/span&gt;
&lt;span class="n"&gt;RUN&lt;/span&gt; &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;init&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;
&lt;span class="n"&gt;RUN&lt;/span&gt; &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;resume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt;&lt;span class="mf"&gt;@3.0.0&lt;/span&gt;
&lt;span class="n"&gt;ADD&lt;/span&gt; &lt;span class="n"&gt;jsonresume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;theme&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;even&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;node_modules&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jsonresume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;theme&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;even&lt;/span&gt;
&lt;span class="n"&gt;WORKDIR&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;node_modules&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jsonresume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;theme&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;even&lt;/span&gt;
&lt;span class="n"&gt;RUN&lt;/span&gt; &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;
&lt;span class="n"&gt;WORKDIR&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;
&lt;span class="n"&gt;ENTRYPOINT&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;node&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/data/node_modules/resume-cli&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Si c'est un thème installable directement, remplacez &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;RUN&lt;/span&gt; &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;resume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt;&lt;span class="mf"&gt;@3.0.0&lt;/span&gt;
&lt;span class="n"&gt;ADD&lt;/span&gt; &lt;span class="n"&gt;jsonresume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;theme&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;even&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;node_modules&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jsonresume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;theme&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;even&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;par :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;RUN&lt;/span&gt; &lt;span class="n"&gt;npm&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;resume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;cli&lt;/span&gt;&lt;span class="mf"&gt;@3.0.0&lt;/span&gt; &lt;span class="n"&gt;jsonresume&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;theme&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;even&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Enfin, il faut compiler cette image et si vous la créez à distance, la push:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;docker build -t monrepo/jsonresume .&lt;/span&gt;
&lt;span class="err"&gt;docker push monrepo/jsonresume&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sur un Mac M1, (toujours testé avec succés sur Mac Mini), pour la build:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;docker buildx build --platform linux/amd64 -t monrepo/jsonresume --push .&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Fichier de configuration nginx&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;user&lt;/span&gt;  &lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;error_log&lt;/span&gt;  &lt;span class="n"&gt;stderr&lt;/span&gt;  &lt;span class="n"&gt;warn&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;pid&lt;/span&gt;        &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;worker_processes&lt;/span&gt;  &lt;span class="n"&gt;auto&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;worker_rlimit_nofile&lt;/span&gt; &lt;span class="mi"&gt;4096&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;events&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;worker_connections&lt;/span&gt; &lt;span class="mi"&gt;4096&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;multi_accept&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;    
&lt;span class="n"&gt;http&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;include&lt;/span&gt;       &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;mime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;default_type&lt;/span&gt;  &lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;octet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;stream&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;log_format&lt;/span&gt;  &lt;span class="n"&gt;main&lt;/span&gt;  &lt;span class="s1"&gt;&amp;#39;$remote_addr - $remote_user [$time_local] &amp;quot;$request&amp;quot; &amp;#39;&lt;/span&gt;
                        &lt;span class="s1"&gt;&amp;#39;$status $body_bytes_sent &amp;quot;$http_referer&amp;quot; &amp;#39;&lt;/span&gt;
                        &lt;span class="s1"&gt;&amp;#39;&amp;quot;$http_user_agent&amp;quot; &amp;quot;$http_x_forwarded_for&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;sendfile&lt;/span&gt;        &lt;span class="n"&gt;off&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="c1"&gt;#tcp_nopush     on;&lt;/span&gt;
    &lt;span class="n"&gt;keepalive_timeout&lt;/span&gt;           &lt;span class="mi"&gt;600&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;proxy_connect_timeout&lt;/span&gt;       &lt;span class="mi"&gt;600&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;server_tokens&lt;/span&gt; &lt;span class="n"&gt;off&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;proxy_send_timeout&lt;/span&gt;          &lt;span class="mi"&gt;600&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;send_timeout&lt;/span&gt;                &lt;span class="mi"&gt;600&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;uwsgi_read_timeout&lt;/span&gt;          &lt;span class="mi"&gt;600&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="c1"&gt;# This is the main geonode conf&lt;/span&gt;
    &lt;span class="n"&gt;charset&lt;/span&gt;     &lt;span class="n"&gt;utf&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="c1"&gt;# max upload size&lt;/span&gt;
    &lt;span class="n"&gt;client_max_body_size&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;client_body_buffer_size&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt;&lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;large_client_header_buffers&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;proxy_read_timeout&lt;/span&gt; &lt;span class="mi"&gt;600&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;fastcgi_hide_header&lt;/span&gt; &lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Cookie&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;root&lt;/span&gt;   &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;location&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;rewrite&lt;/span&gt; &lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;/.*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;\&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;\&lt;span class="err"&gt;?&lt;/span&gt;&lt;span class="o"&gt;.*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;?&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt; &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="n"&gt;permanent&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;rewrite&lt;/span&gt; &lt;span class="o"&gt;^/&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;.*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/$&lt;/span&gt; &lt;span class="o"&gt;/$&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;permanent&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;try_files&lt;/span&gt; &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;uri&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;404&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;add_header&lt;/span&gt; &lt;span class="n"&gt;Access&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Control&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Allow&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Methods&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;GET, POST&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
 &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="c1"&gt;#include /etc/nginx/conf.d/*.conf;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;docker-compose.yml&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;services&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;webserver&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;nginx&lt;/span&gt;
        &lt;span class="n"&gt;healthcheck&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;curl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="mf"&gt;127.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;exit&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
            &lt;span class="n"&gt;interval&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
            &lt;span class="n"&gt;retries&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
        &lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="sr"&gt;/www/&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;webserver&lt;/span&gt;&lt;span class="sr"&gt;/nginx.conf:/etc/nginx/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;conf&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ro&lt;/span&gt;
    &lt;span class="n"&gt;generate&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;monrepo&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;jsonresume&lt;/span&gt;
        &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;export&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;theme&lt;/span&gt; &lt;span class="n"&gt;even&lt;/span&gt; &lt;span class="sr"&gt;/tmp/resume_output/&lt;/span&gt;&lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;html&lt;/span&gt;
        &lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt;  &lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="sr"&gt;/resume_output/&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="sr"&gt;/resume.json:/data/&lt;/span&gt;&lt;span class="n"&gt;resume&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;json&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ro&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;files&lt;/span&gt;&lt;span class="sr"&gt;/profile.jpeg:/data/node_modules/jsonresume-theme-even/&lt;/span&gt;&lt;span class="n"&gt;profile&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;jpeg&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ro&lt;/span&gt;
    &lt;span class="n"&gt;pdf&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;monrepo&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt;
        &lt;span class="n"&gt;working_dir&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="sr"&gt;/workspace/&lt;/span&gt;
        &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;:///&lt;/span&gt;&lt;span class="n"&gt;workspace&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;html&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;pdf&lt;/span&gt; &lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pdf&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;scale&lt;/span&gt; &lt;span class="mf"&gt;0.72&lt;/span&gt;
        &lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
            &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;:/&lt;/span&gt;&lt;span class="n"&gt;workspace&lt;/span&gt;
&lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;cv&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Utilisation finale&lt;/h3&gt;
&lt;p&gt;Il suffira juste d'utiliser un reverse proxy pour rendre accessible votre CV.&lt;/p&gt;</content><category term="Devops"></category><category term="CI/CD"></category></entry><entry><title>Disque virtuel</title><link href="https://maxime.sourdin.ovh/disque-virtuel.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/disque-virtuel.html</id><summary type="html">&lt;p&gt;Création  et utilisation d'images disques&lt;/p&gt;</summary><content type="html">&lt;p&gt;Création d'un fichier image disque&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo mkdir /storage/images/999/ &amp;amp;&amp;amp; sudo dd if=/dev/zero of=/storage/images/999/le.raw bs=4k count=12500&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Formatage en ext4&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo mkfs.ext4 /storage/images/999/le.raw&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Désactivation des vérifications et du contrôle au montage du disque virtuel&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo tune2fs -c0 -i0 /storage/images/999/le.raw&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Création d'un dossier de montage et montage&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo mkdir /media/test &amp;amp;&amp;amp; sudo mount -o loop /storage/images/999/le.raw /media/test/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sur Proxmox:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;arch&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;amd64&lt;/span&gt;
&lt;span class="n"&gt;hostname&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;servpro&lt;/span&gt;
&lt;span class="n"&gt;memory&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4096&lt;/span&gt;
    &lt;span class="n"&gt;mp1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;storage&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;999&lt;/span&gt;&lt;span class="sr"&gt;/le.raw,mp=/etc/&lt;/span&gt;&lt;span class="n"&gt;letsencrypt&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;acl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;ro&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;backup&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;nameserver&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mf"&gt;10.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt;
&lt;span class="n"&gt;net0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;eth1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;bridge&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;vmbr1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;gw&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;10.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.10&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;hwaddr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;CD&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;EE&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;D9&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;10.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.42&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;ip6&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;tag&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;veth&lt;/span&gt;
&lt;span class="n"&gt;onboot&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;ostype&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;debian&lt;/span&gt;
&lt;span class="n"&gt;rootfs&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;storage&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;106&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;vm&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;106&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;disk&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;raw&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="n"&gt;G&lt;/span&gt;
&lt;span class="n"&gt;swap&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;unprivileged&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Hyperviseur"></category><category term="Proxmox"></category></entry><entry><title>Extensions Firefox conseillées</title><link href="https://maxime.sourdin.ovh/extensions-firefox-conseillees.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/extensions-firefox-conseillees.html</id><summary type="html">&lt;p&gt;Extensions firefox à utiliser&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Feedindicator&lt;/h1&gt;
&lt;p&gt;Permet d'afficher si le site visité dispose d'un flux RSS/ATOM&lt;/p&gt;
&lt;h1&gt;ublock origin&lt;/h1&gt;
&lt;p&gt;Bloqueur de pub&lt;/p&gt;
&lt;h1&gt;grammalecte&lt;/h1&gt;
&lt;p&gt;Détection et corrections de fautes d'orthographe&lt;/p&gt;</content><category term="Navigateur"></category><category term="Firefox"></category></entry><entry><title>Hackintosh Vostro 7590</title><link href="https://maxime.sourdin.ovh/hackintosh-vostro-7590.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/hackintosh-vostro-7590.html</id><summary type="html">&lt;p&gt;Utilisation d'un Vostro 7590 comme Hackintosh&lt;/p&gt;</summary><content type="html">&lt;p&gt;Retour sur l’utilisation de MacOS sur un Dell Vostro/Inspiron 7590 (hackintosh)&lt;/p&gt;
&lt;p&gt;Ce qui fonctionne:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HDMI&lt;/li&gt;
&lt;li&gt;Camera&lt;/li&gt;
&lt;li&gt;USB&lt;/li&gt;
&lt;li&gt;Usb Type C /Thunderbolt3&lt;/li&gt;
&lt;li&gt;Bluetooth&lt;/li&gt;
&lt;li&gt;Veille&lt;/li&gt;
&lt;li&gt;Airplay (!!)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ce qui ne fonctionne pas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Wifi&lt;/li&gt;
&lt;li&gt;Microphone&lt;/li&gt;
&lt;li&gt;Lecteur de carte SD&lt;/li&gt;
&lt;li&gt;la GTX 1050 3Go&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La clé bootable a été crée avec ce &lt;a href="https://dortania.github.io/OpenCore-Desktop-Guide/installer-guide/winblows-install.html"&gt;guide &lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Dés que la clé bootable est crée, il faut accéder à la partition EFI, qui s’appelle BOOT, aller dans le dossier EFI. Il faut télécharger cette &lt;a href="https://github.com/Pinming/Dell-Inspiron-7590-Hackintosh-Opencore/archive/master.zip"&gt;archive &lt;/a&gt; et la décompresser dans le dossier OC, en écrasant les fichiers existants.&lt;/p&gt;
&lt;p&gt;Après, il faut redémarrer sur la clé, et c’est le mode de récupération de Catalina qui s’affichera. Il est nécessaire d’allouer un disque entier pour Catalina. Si vous avez une connexion ADSL, l’étape suivante sera assez longue, car l’installateur télécharge ce qu’il faut pour Catalina.&lt;/p&gt;
&lt;p&gt;Enfin, à la fin de l’installation, et au redémarrage, il faut choisir de booter sur le disque. La partition EFI du disque doit être montée.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo mkdir /Volumes/efi&lt;/span&gt;
&lt;span class="err"&gt;sudo mount -t msdos /dev/disk0s1 /Volumes/efi&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Après, il est possible d' y copier le contenu de la partition EFI de la clé USB, avec le Finder.&lt;/p&gt;
&lt;p&gt;Pour le Wifi, ça avance, grâce à deux projets:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/zxystd/itlwm"&gt; itwlm &lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/AppleIntelWifi/adapter"&gt;AppleIntelWifi &lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Niveau &lt;a href="https://browser.geekbench.com/v5/cpu/1919290" &gt;benchmarks &lt;/a&gt;, c’est pas mal, ça s’approche d’un MacBookPro 16P de 2019, avec le même processeur, vendue 2700 euros (mais pas limité par le GPU intégré et qui n’a pas les dysfonctionnements du hackintosh évidemment).&lt;/p&gt;
&lt;p&gt;Au niveau stabilité, j'ai eu quelques petits problèmes, mais ça semble inhérent à Catalina. Le boot, quant à lui est plus rapide que sur un vrai Mac, et la ventilation est mieux géré.&lt;/p&gt;</content><category term="Mac"></category><category term="Hackintosh"></category></entry><entry><title>Infos utiles à propos du MacBookPro 2011</title><link href="https://maxime.sourdin.ovh/infos-utiles-a-propos-du-macbookpro-2011.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/infos-utiles-a-propos-du-macbookpro-2011.html</id><summary type="html">&lt;p&gt;Utilisation d'un MBP 2011 sous Catalina et Windows&lt;/p&gt;</summary><content type="html">&lt;p&gt;Il est possible de passer ce mac facilement sous Catalina, grâce au patch de &lt;a href="http://dosdude1.com/catalina/"&gt;dosdude&lt;/a&gt; , sous réserve d'avoir un ordi ou une machine virtuelle MacOS et d'avoir une clé usb de 16Go.&lt;/p&gt;
&lt;p&gt;Pensez cependant à désactiver le SIP pour que l'installation puisse redémarrer sans problème par la suite et avoir les patches d'installés directement.&lt;/p&gt;
&lt;p&gt;Catalina est assez gourmand donc il faut au moins 8Go de RAM, pour le reste les patches résolvent le problème de wifi, bluetooth et accélération graphique.&lt;/p&gt;
&lt;p&gt;Depuis plus d'une semaine, cette installation fonctionne correctement, et mis à part le temps de boot (environ 45 secondes), il est plus que largement utilisable sous Catalina.&lt;/p&gt;
&lt;p&gt;Windows 10  fonctionne dessus en dual-boot, avec quelques problèmes assez embêtants. Pensez à graver un DVD d'installation de Windows pour pouvoir commencer l'installation, le débit est peut-être largement pourri mais impossible de faire l'installation avec une clé bootable.&lt;/p&gt;
&lt;p&gt;Voici la marche à suivre, piquée sur le &lt;a href="https://forums.macg.co/threads/impossible-dintaller-windows-10-sur-la-partition-bootcamp.1286410/page-2"&gt;forum macg&lt;/a&gt;, pour pouvoir booter correctement sur le DVD.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Désactiver le SIP en mode recovery&lt;/li&gt;
&lt;li&gt;Rebooter sur macOS et ouvrir un terminal pour installer gdisk: &lt;code&gt;brew cask install gdisk&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Exécuter cette commande pour analyser votre disque: &lt;code&gt;sudo gdisk /dev/disk0&lt;/code&gt;. Récupérer le numéro de votre disque avec &lt;code&gt;diskutils list&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Ensuite tapez &lt;code&gt;x&lt;/code&gt; &lt;code&gt;n&lt;/code&gt; &lt;code&gt;w&lt;/code&gt; &lt;code&gt;y&lt;/code&gt; puis rebootez sur macOS.
Tout ça modifie une petite partie de la table de partitions qui permet à Windows de s'initialiser et de s'installer sans problème.&lt;/li&gt;
&lt;li&gt;Enfin vous pouvez rebooter sur le DVD d'installation, en appuyant sur &lt;code&gt;ALT&lt;/code&gt; au boot, et choisir "Windows"&lt;/li&gt;
&lt;/ul&gt;</content><category term="Mac"></category><category term="MacOS"></category><category term="Windows"></category></entry><entry><title>Monitoring facile avec checkup et Grafana</title><link href="https://maxime.sourdin.ovh/monitoring-facile-avec-checkup-et-grafana.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/monitoring-facile-avec-checkup-et-grafana.html</id><summary type="html">&lt;p&gt;Surveiller l'état de ses services facilement&lt;/p&gt;</summary><content type="html">&lt;p&gt;Quelques prérequis :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;un bucket S3 (sur n'importe quel service compatible)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Docker ou Podman&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Première étape : le déploiement de Grafana et Prometheus via docker-compose&lt;/h1&gt;
&lt;p&gt;## Édition du fichier docker-compose:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;3&amp;#39;&lt;/span&gt;
  &lt;span class="n"&gt;grafana&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;grafana&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;grafana&lt;/span&gt;
    &lt;span class="n"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;grafana&lt;/span&gt;
    &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;UID:UID&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;always&lt;/span&gt;
    &lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;grafana&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;grafana&lt;/span&gt;
    &lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;monitoring&lt;/span&gt;
    &lt;span class="n"&gt;healthcheck&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;curl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="mf"&gt;127.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3000&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;exit&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
      &lt;span class="n"&gt;interval&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
      &lt;span class="n"&gt;retries&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
 &lt;span class="n"&gt;prometheus&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;prom&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;prometheus&lt;/span&gt;
    &lt;span class="n"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;prometheus&lt;/span&gt;
    &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;UID:UID&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;always&lt;/span&gt;
    &lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;prometheus&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;prometheus&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;prometheus&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;prometheus&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--config.file=/etc/prometheus/prometheus.yml&amp;#39;&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--storage.tsdb.path=/prometheus&amp;#39;&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--web.console.libraries=/etc/prometheus/console_libraries&amp;#39;&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--web.console.templates=/etc/prometheus/consoles&amp;#39;&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--storage.tsdb.retention=200h&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;monitoring&lt;/span&gt;
    &lt;span class="n"&gt;healthcheck&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;curl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="mf"&gt;127.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;9090&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;exit&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
      &lt;span class="n"&gt;interval&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
      &lt;span class="n"&gt;retries&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;monitoring&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;bridge&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Remplacer l'UID par celui qui a les droits d'exécuter Docker.&lt;/p&gt;
&lt;p&gt;## Configuration prometheus (dans prometheus/config/prometheus.yml)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;global&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;scrape_interval&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
  &lt;span class="n"&gt;evaluation_interval&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;

&lt;span class="n"&gt;rule_files&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;targets.rules&amp;quot;&lt;/span&gt;
  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;host.rules&amp;quot;&lt;/span&gt;
  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;containers.rules&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;scrape_configs&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
  &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;job_name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;prometheus&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;scrape_interval&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
    &lt;span class="n"&gt;static_configs&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;targets&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;localhost:9090&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Ensuite, faites un docker-compose up -d et suivez la configuration pas à pas de Grafana (mot de passe administrateur·ice.)&lt;/p&gt;
&lt;p&gt;Pour la datasource, il s'agit de prometheus, celle-ci doit donc pointer vers http://prometheus:9090. Attention, le trafic passe donc en clair.&lt;/p&gt;
&lt;p&gt;## Ajout d'un nouveau type de datasource: Infinity&lt;/p&gt;
&lt;p&gt;Vous pouvez retrouver le code &lt;a href="https://github.com/yesoreyeram/grafana-infinity-datasource"&gt;d'Infinity ici&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Pour l'installer c'est très simple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt; docker exec -ti grafana grafana-cli plugins install yesoreyeram-infinity-datasource&lt;/span&gt;
&lt;span class="err"&gt;docker restart grafana&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;Seconde étape: compilation d'une image Docker personnalisée de Checkup&lt;/h1&gt;
&lt;h2&gt;Récupération des sources&lt;/h2&gt;
&lt;p&gt;Récupérez les sources de &lt;a href="https://github.com/sourcegraph/checkup"&gt;checkup&lt;/a&gt; ici. Il va falloir modifier plusieurs lignes dans checkup/storage/fs/types.go:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;package&lt;/span&gt; &lt;span class="n"&gt;fs&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;fmt&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;  &lt;span class="s2"&gt;&amp;quot;github.com/sourcegraph/checkup/types&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="n"&gt;IndexName&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;index.json&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="n"&gt;FilenameFormatString&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;format&lt;/span&gt; &lt;span class="n"&gt;string&lt;/span&gt; &lt;span class="n"&gt;used&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="n"&gt;GenerateFilename&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;create&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="n"&gt;FilenameFormatString&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;const&lt;/span&gt; &lt;span class="n"&gt;FilenameFormatString&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;latest.json&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="n"&gt;GenerateFilename&lt;/span&gt; &lt;span class="n"&gt;returns&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;filename&lt;/span&gt; &lt;span class="n"&gt;that&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="n"&gt;ideal&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;storing&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;results&lt;/span&gt; &lt;span class="nb"&gt;file&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;storage&lt;/span&gt; &lt;span class="n"&gt;provider&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="n"&gt;that&lt;/span&gt; &lt;span class="n"&gt;relies&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;filename&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;retrieval&lt;/span&gt; &lt;span class="n"&gt;that&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;timeframe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;It&lt;/span&gt; &lt;span class="n"&gt;returns&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;string&lt;/span&gt; &lt;span class="n"&gt;pointer&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;used&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;AWS&lt;/span&gt; &lt;span class="n"&gt;SDK&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;func&lt;/span&gt; &lt;span class="n"&gt;GenerateFilename&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;latest.json&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;//&lt;/span&gt;  &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fmt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Sprintf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FilenameFormatString&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;types&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Timestamp&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Au lieu de faire un fichier différent à chaque test, le fichier distant sera écrasé. Pour pouvoir faire traiter le fichier par Grafana, cela sera plus simple.&lt;/p&gt;
&lt;p&gt;Il faut également modifier le Dockerfile:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;FROM golang:1.16.3-alpine as builder&lt;/span&gt;
&lt;span class="err"&gt;ENV CGO_ENABLED=0&lt;/span&gt;
&lt;span class="err"&gt;COPY . /app&lt;/span&gt;
&lt;span class="err"&gt;WORKDIR /app&lt;/span&gt;
&lt;span class="err"&gt;RUN apk --no-cache add make &amp;amp;&amp;amp; make build&lt;/span&gt;
&lt;span class="err"&gt;FROM alpine:latest&lt;/span&gt;
&lt;span class="err"&gt;WORKDIR /app&lt;/span&gt;
&lt;span class="err"&gt;COPY --from=builder /app/builds/checkup /usr/local/bin/checkup&lt;/span&gt;
&lt;span class="err"&gt;ADD statuspage/ /app/statuspage&lt;/span&gt;
&lt;span class="err"&gt;RUN (echo &amp;quot;*/5 * * * * cd /app &amp;amp;&amp;amp; checkup --store&amp;quot;) | crontab -&lt;/span&gt;
&lt;span class="err"&gt;CMD /bin/sh -c &amp;quot;exec crond -f -L /dev/stdout &amp;amp;&amp;amp; cd /app &amp;amp;&amp;amp; checkup --store&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Cela permet d'automatiser les tests (toutes les 5 minutes), et également d'utiliser une image Golang plus moderne.&lt;/p&gt;
&lt;h2&gt;Compilation de l'image&lt;/h2&gt;
&lt;p&gt;Pour un processeur x86-64 classique:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;docker buildx build --platform linux/amd64 -t monrepodocker.com/checkup --push .&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Pour un Raspberry Pi Zero W (à noter que celle-ci se passe sans problème sur l'architecture M1) :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;docker buildx build --platform linux/arm/v6 -t monrepodocker.com/checkup:maison1 --push .&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;Troisième étape: configuration d'un bucket S3&lt;/h1&gt;
&lt;h2&gt;Création du bucket&lt;/h2&gt;
&lt;p&gt;Créez votre bucket via l'interface ou via la cli, puis créer un utilisateur·ice avec un accès API. Notez bien l'access key et la secret key&lt;/p&gt;
&lt;h2&gt;Stratégie IAM pour l'utilisateur·ice&lt;/h2&gt;
&lt;p&gt;Un exemple de stratégie IAM pour l'utilisateur·ice:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;Version&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2012-10-17&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;Statement&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Sid&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;VisualEditor0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Effect&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Allow&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Action&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:PutObject&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:GetObject&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:DeleteObject&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Resource&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket/*&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket/*&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Sid&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;VisualEditor1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Effect&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Allow&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Action&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:ListBucketMultipartUploads&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:AbortMultipartUpload&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:ListMultipartUploadParts&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Resource&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket/*&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Sid&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;VisualEditor2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Effect&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Allow&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Action&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:ListBucketMultipartUploads&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:AbortMultipartUpload&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;s3:ListMultipartUploadParts&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;Resource&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket/*&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;arn:aws:s3:::nombucket&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Stratégie pour le bucket&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;{&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;Version&amp;quot;: &amp;quot;2012-10-17&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;Id&amp;quot;: &amp;quot;S3PolicyId1&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;Statement&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;        {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Sid&amp;quot;: &amp;quot;IPAllow&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Effect&amp;quot;: &amp;quot;Allow&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Principal&amp;quot;: &amp;quot;*&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Action&amp;quot;: &amp;quot;s3:GetObject&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Resource&amp;quot;: &amp;quot;ARN BUCKET/*&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Condition&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;IpAddress&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;aws:SourceIp&amp;quot;: &amp;quot;IP DE GRAFANA&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;    ]&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Remplacer les valeurs en majuscule (dans Resource et aws:SourceIp) et votre bucket sera prêt.&lt;/p&gt;
&lt;h1&gt;Quatrième étape: édition des tests et des notifications&lt;/h1&gt;
&lt;h2&gt;Édition de la configuration: checkup.json&lt;/h2&gt;
&lt;p&gt;Un fichier checkup.json complet:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;    {&amp;quot;storage&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;s3&amp;quot;,&amp;quot;access_key_id&amp;quot;:&amp;quot;ACCESS KEY ID S3&amp;quot;,&amp;quot;secret_access_key&amp;quot;:&amp;quot;SECRET ACCESS KEY S3&amp;quot;,&amp;quot;region&amp;quot;:&amp;quot;eu-west-3&amp;quot;,&amp;quot;bucket&amp;quot;:&amp;quot;BUCKET S3&amp;quot;,&amp;quot;check_expiry&amp;quot;:604800000000000},&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;notifiers&amp;quot;:[{&amp;quot;type&amp;quot;: &amp;quot;mail&amp;quot;,&amp;quot;from&amp;quot;: &amp;quot;POSTMASTER@EXAMPLE.COM&amp;quot;,&amp;quot;to&amp;quot;: [ &amp;quot;DESTINATAIRE@EXAMPLE.ORG&amp;quot; ],&amp;quot;subject&amp;quot;: &amp;quot;Status Alert&amp;quot;,&amp;quot;smtp&amp;quot;: {&amp;quot;server&amp;quot;: &amp;quot;SERVEUR MAIL&amp;quot;,&amp;quot;port&amp;quot;: 587,&amp;quot;username&amp;quot;: &amp;quot;POSTMASTER@EXAMPLE.COM&amp;quot;,&amp;quot;password&amp;quot;: &amp;quot;MOT DE PASSE POSTMASTER&amp;quot;}},&lt;/span&gt;
&lt;span class="err"&gt;    {&amp;quot;type&amp;quot;: &amp;quot;slack&amp;quot;,&amp;quot;username&amp;quot;: &amp;quot;Status Bot (maison1)&amp;quot;,&amp;quot;channel&amp;quot;: &amp;quot;#système&amp;quot;,&amp;quot;webhook&amp;quot;: &amp;quot;WEBHOOK DISCORD&amp;quot;/slack&amp;quot;}],&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;checkers&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;tcp&amp;quot;,&amp;quot;endpoint_name&amp;quot;:&amp;quot;Livebox&amp;quot;,&amp;quot;endpoint_url&amp;quot;:&amp;quot;172.16.0.1:443&amp;quot;,&amp;quot;threshold_rtt&amp;quot;:500000000,&amp;quot;attempts&amp;quot;:5},&lt;/span&gt;
&lt;span class="err"&gt;   {&amp;quot;type&amp;quot;:&amp;quot;tcp&amp;quot;,&amp;quot;endpoint_name&amp;quot;:&amp;quot;wifi1&amp;quot;,&amp;quot;endpoint_url&amp;quot;:&amp;quot;192.168.1.1:80&amp;quot;,&amp;quot;threshold_rtt&amp;quot;:500000000,&amp;quot;attempts&amp;quot;:5},&lt;/span&gt;
&lt;span class="err"&gt;{&amp;quot;type&amp;quot;:&amp;quot;tcp&amp;quot;,&amp;quot;endpoint_name&amp;quot;:&amp;quot;FreeNAS&amp;quot;,&amp;quot;endpoint_url&amp;quot;:&amp;quot;172.16.0.3:443&amp;quot;,&amp;quot;threshold_rtt&amp;quot;:500000000,&amp;quot;attempts&amp;quot;:5},&lt;/span&gt;
&lt;span class="err"&gt;    {&amp;quot;type&amp;quot;: &amp;quot;tcp&amp;quot;,&amp;quot;endpoint_name&amp;quot;: &amp;quot;FreeNAS SMB&amp;quot;,&amp;quot;endpoint_url&amp;quot;: &amp;quot;172.16.0.3:445&amp;quot;},  &lt;/span&gt;
&lt;span class="err"&gt;    {&amp;quot;type&amp;quot;: &amp;quot;tcp&amp;quot;,&amp;quot;endpoint_name&amp;quot;: &amp;quot;Plex&amp;quot;,&amp;quot;endpoint_url&amp;quot;: &amp;quot;172.16.0.6:32400&amp;quot;} ],&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;timestamp&amp;quot;:&amp;quot;0001-01-01T00:00:00Z&amp;quot;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;En décomposant un peu, on a :&lt;/p&gt;
&lt;h3&gt;La configuration pour le bucket S3&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;    {&amp;quot;storage&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;s3&amp;quot;,&amp;quot;access_key_id&amp;quot;:&amp;quot;ACCESS KEY ID S3&amp;quot;,&amp;quot;secret_access_key&amp;quot;:&amp;quot;SECRET ACCESS KEY S3&amp;quot;,&amp;quot;region&amp;quot;:&amp;quot;REGION&amp;quot;,&amp;quot;bucket&amp;quot;:&amp;quot;BUCKET S3&amp;quot;,&amp;quot;check_expiry&amp;quot;:604800000000000}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Remplacer les valeurs en majuscule par celles obtenues précédemment, pour permettre la connexion au bucket.&lt;/p&gt;
&lt;h3&gt;La configuration des notifications mails et Discord&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;    &amp;quot;notifiers&amp;quot;:[{&amp;quot;type&amp;quot;: &amp;quot;mail&amp;quot;,&amp;quot;from&amp;quot;: &amp;quot;POSTMASTER@EXAMPLE.COM&amp;quot;,&amp;quot;to&amp;quot;: [ &amp;quot;DESTINATAIRE@EXAMPLE.ORG&amp;quot; ],&amp;quot;subject&amp;quot;: &amp;quot;Status Alert&amp;quot;,&amp;quot;smtp&amp;quot;: {&amp;quot;server&amp;quot;: &amp;quot;SERVEUR MAIL&amp;quot;,&amp;quot;port&amp;quot;: 587,&amp;quot;username&amp;quot;: &amp;quot;POSTMASTER@EXAMPLE.COM&amp;quot;,&amp;quot;password&amp;quot;: &amp;quot;MOT DE PASSE POSTMASTER&amp;quot;}}, {&amp;quot;type&amp;quot;: &amp;quot;slack&amp;quot;,&amp;quot;username&amp;quot;: &amp;quot;Status Bot (maison1)&amp;quot;,&amp;quot;channel&amp;quot;: &amp;quot;#système&amp;quot;,&amp;quot;webhook&amp;quot;: &amp;quot;WEBHOOK DISCORD&amp;quot;/slack&amp;quot;}],&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Ici, c'est encore plus simple (il est toujours question de remplacer les valeurs en majuscule), évidemment pensez à créer un compte mail dédié pour limiter les risques.&lt;/p&gt;
&lt;p&gt;Pour la partie Discord, je vous renvoie vers la documentation &lt;a href="https://support.discord.com/hc/fr/articles/228383668-Utiliser-les-Webhooks"&gt;Discord&lt;/a&gt;.
Remplacer 'WEBHOOK DISCORD" par l'URL de votre webhook, et gardez le /slack à la fin. C'est un mode de compatibilité particulièrement utile.&lt;/p&gt;
&lt;h3&gt;La configuration des tests&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/sourcegraph/checkup/blob/master/README.md"&gt;La documentation est particulièrement claire&lt;/a&gt; :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="o"&gt;####&lt;/span&gt; &lt;span class="n"&gt;HTTP&lt;/span&gt; &lt;span class="n"&gt;Checker&lt;/span&gt;

&lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;http&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;endpoint_name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;Example HTTP&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;endpoint_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;http://www.example.com&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;

&lt;span class="o"&gt;####&lt;/span&gt; &lt;span class="n"&gt;TCP&lt;/span&gt; &lt;span class="n"&gt;Checker&lt;/span&gt;

&lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;tcp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;endpoint_name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;Example TCP&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;endpoint_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;example.com:80&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;

&lt;span class="o"&gt;####&lt;/span&gt; &lt;span class="n"&gt;DNS&lt;/span&gt; &lt;span class="n"&gt;Checkers&lt;/span&gt;

&lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;dns&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;endpoint_name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;Example of endpoint_url looking up host.example.com&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;endpoint_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;ns.example.com:53&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;hostname_fqdn&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;host.example.com&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;

&lt;span class="o"&gt;####&lt;/span&gt; &lt;span class="n"&gt;TLS&lt;/span&gt; &lt;span class="n"&gt;Checkers&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     
&lt;span class="err"&gt;{&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;tls&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;endpoint_name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;Example TLS Protocol Check&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="ss"&gt;&amp;quot;endpoint_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="ss"&gt;&amp;quot;www.example.com:443&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Dans mon cas, je teste seulement si les hôtes sont joignables, via un petit ping sur les ports censés répondre.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;&amp;quot;checkers&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;tcp&amp;quot;,&amp;quot;endpoint_name&amp;quot;:&amp;quot;Livebox&amp;quot;,&amp;quot;endpoint_url&amp;quot;:&amp;quot;172.16.0.1:443&amp;quot;,&amp;quot;threshold_rtt&amp;quot;:500000000,&amp;quot;attempts&amp;quot;:5}, {&amp;quot;type&amp;quot;:&amp;quot;tcp&amp;quot;,&amp;quot;endpoint_name&amp;quot;:&amp;quot;wifi1&amp;quot;,&amp;quot;endpoint_url&amp;quot;:&amp;quot;192.168.1.1:80&amp;quot;,&amp;quot;threshold_rtt&amp;quot;:500000000,&amp;quot;attempts&amp;quot;:5}, {&amp;quot;type&amp;quot;:&amp;quot;tcp&amp;quot;,&amp;quot;endpoint_name&amp;quot;:&amp;quot;FreeNAS&amp;quot;,&amp;quot;endpoint_url&amp;quot;:&amp;quot;172.16.0.3:443&amp;quot;,&amp;quot;threshold_rtt&amp;quot;:500000000,&amp;quot;attempts&amp;quot;:5},&lt;/span&gt;
&lt;span class="err"&gt;{&amp;quot;type&amp;quot;: &amp;quot;tcp&amp;quot;,&amp;quot;endpoint_name&amp;quot;: &amp;quot;FreeNAS SMB&amp;quot;,&amp;quot;endpoint_url&amp;quot;: &amp;quot;172.16.0.3:445&amp;quot;},&lt;/span&gt;
&lt;span class="err"&gt;{&amp;quot;type&amp;quot;: &amp;quot;tcp&amp;quot;,&amp;quot;endpoint_name&amp;quot;: &amp;quot;Plex&amp;quot;,&amp;quot;endpoint_url&amp;quot;: &amp;quot;172.16.0.6:32400&amp;quot;}],&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Ci-dessous, le test de mon Shaarli. Attention, les tests HTTP sont sensibles aux redirections, en cas de retour d'un code HTTP 302, le service est considéré comme DOWN.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;{&amp;quot;type&amp;quot;:&amp;quot;http&amp;quot;,&amp;quot;endpoint_name&amp;quot;:&amp;quot;Shaarli&amp;quot;,&amp;quot;endpoint_url&amp;quot;:&amp;quot;https://links.maxime.sourdin.ovh&amp;quot;,&amp;quot;threshold_rtt&amp;quot;:500000000,&amp;quot;attempts&amp;quot;:5}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Le format pour l'horodatage&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;&amp;quot;timestamp&amp;quot;:&amp;quot;0001-01-01T00:00:00Z&amp;quot;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Sécurisation du fichier checkup.json&lt;/h2&gt;
&lt;p&gt;Etant donné que le conteneur est exécuté avec l'utilisateur·ice courant·e, pensez à appliquer les bonnes autorisations au fichier, vu qu'il contient de quoi accéder à un bucket et de quoi accéder à une boite mail:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;chmod 600 checkup.json&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;En cas de soucis avec le bucket, le peu d'informations qui pourront être retirées sont des ports pour se connecter et des URL, par exemple :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;[{&amp;quot;title&amp;quot;:&amp;quot;Livebox&amp;quot;,&amp;quot;endpoint&amp;quot;:&amp;quot;172.16.0.1:443&amp;quot;,&amp;quot;timestamp&amp;quot;:1620243308993278950,&amp;quot;times&amp;quot;:[{&amp;quot;rtt&amp;quot;:20929892},{&amp;quot;rtt&amp;quot;:48361749},{&amp;quot;rtt&amp;quot;:23045881},{&amp;quot;rtt&amp;quot;:35709815},{&amp;quot;rtt&amp;quot;:36920809}],&amp;quot;threshold&amp;quot;:500000000,&amp;quot;healthy&amp;quot;:true},{&amp;quot;title&amp;quot;:&amp;quot;wifi1&amp;quot;,&amp;quot;endpoint&amp;quot;:&amp;quot;192.168.1.1:80&amp;quot;,&amp;quot;timestamp&amp;quot;:1620243308994907941,&amp;quot;times&amp;quot;:[{&amp;quot;rtt&amp;quot;:27225859},{&amp;quot;rtt&amp;quot;:34943819},{&amp;quot;rtt&amp;quot;:39484795},{&amp;quot;rtt&amp;quot;:30538842},{&amp;quot;rtt&amp;quot;:29570846}],&amp;quot;threshold&amp;quot;:500000000,&amp;quot;healthy&amp;quot;:true},{&amp;quot;title&amp;quot;:&amp;quot;FreeNAS&amp;quot;,&amp;quot;endpoint&amp;quot;:&amp;quot;172.16.0.3:443&amp;quot;,&amp;quot;timestamp&amp;quot;:1620243308996989931,&amp;quot;times&amp;quot;:[{&amp;quot;rtt&amp;quot;:51494733},{&amp;quot;rtt&amp;quot;:38261802},{&amp;quot;rtt&amp;quot;:23417879},{&amp;quot;rtt&amp;quot;:37854803},{&amp;quot;rtt&amp;quot;:13516930}],&amp;quot;threshold&amp;quot;:500000000,&amp;quot;healthy&amp;quot;:true},{&amp;quot;title&amp;quot;:&amp;quot;FreeNAS SMB&amp;quot;,&amp;quot;endpoint&amp;quot;:&amp;quot;172.16.0.3:445&amp;quot;,&amp;quot;timestamp&amp;quot;:1620243309000877911,&amp;quot;times&amp;quot;:[{&amp;quot;rtt&amp;quot;:38250802}],&amp;quot;healthy&amp;quot;:true},{&amp;quot;title&amp;quot;:&amp;quot;Plex&amp;quot;,&amp;quot;endpoint&amp;quot;:&amp;quot;172.16.0.6:32400&amp;quot;,&amp;quot;timestamp&amp;quot;:1620243308975109044,&amp;quot;times&amp;quot;:[{&amp;quot;rtt&amp;quot;:61374682}],&amp;quot;healthy&amp;quot;:true}]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;Cinquième étape : utilisation dans Grafana&lt;/h1&gt;
&lt;h2&gt;Configuration de la datasource&lt;/h2&gt;
&lt;p&gt;Dans Paramétres/Datasources, sélectionnez "Infinity".
Donnez lui un nom, et pour l'URL, il suffit d'indiquer celle du bucket (sans mot de passe, ni nom de fichier à la fin de celle-ci).&lt;/p&gt;
&lt;p&gt;Après avoir cliqué sur "Save &amp;amp; Test", cette source sera disponible.&lt;/p&gt;
&lt;h2&gt;Ajout d'un panel&lt;/h2&gt;
&lt;p&gt;Sur un nouveau dashboard, ou un existant, ajoutez un panel, et sélectionnez la datasource créée précédemment.&lt;/p&gt;
&lt;p&gt;Dans l'URL, indiquez le nom de votre fichier (comme latest.json par exemple), normalement le passage en mode table de l'affichage sera proposé. Il ne restera plus qu'à sélectionner les colonnes intéressantes, et à les renommer, en se servant de ce que Grafana permet.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Panel Grafana, où l'affichage des données récupérées est paramétré : chaque colonne est renommée correctement (Service, Value et URL au lieu de title, endpoint, timestamp, times, thresold, healthy)" src="https://maxime.sourdin.ovh/medias/checkup-grafana-2.png"&gt;&lt;/p&gt;
&lt;h2&gt;Exemple de dashboard&lt;/h2&gt;
&lt;h3&gt;JSON&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;{&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;annotations&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;list&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;    {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;builtIn&amp;quot;: 1,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;datasource&amp;quot;: &amp;quot;-- Grafana --&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;enable&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;hide&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;iconColor&amp;quot;: &amp;quot;rgba(0, 211, 255, 1)&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;name&amp;quot;: &amp;quot;Annotations &amp;amp; Alerts&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;type&amp;quot;: &amp;quot;dashboard&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;    }&lt;/span&gt;
&lt;span class="err"&gt;    ]&lt;/span&gt;
&lt;span class="err"&gt;},&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;editable&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;gnetId&amp;quot;: null,&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;graphTooltip&amp;quot;: 0,&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;id&amp;quot;: 18,&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;links&amp;quot;: [],&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;panels&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;    {&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;datasource&amp;quot;: &amp;quot;statuspage&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;description&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;fieldConfig&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;defaults&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;color&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;mode&amp;quot;: &amp;quot;thresholds&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;custom&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;align&amp;quot;: null,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;displayMode&amp;quot;: &amp;quot;color-text&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;filterable&amp;quot;: false&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;mappings&amp;quot;: [],&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;noValue&amp;quot;: &amp;quot;KO&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;thresholds&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;mode&amp;quot;: &amp;quot;absolute&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;steps&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;color&amp;quot;: &amp;quot;red&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;value&amp;quot;: null&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            ]&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;overrides&amp;quot;: []&lt;/span&gt;
&lt;span class="err"&gt;    },&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;gridPos&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;h&amp;quot;: 20,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;w&amp;quot;: 12,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;x&amp;quot;: 0,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;y&amp;quot;: 0&lt;/span&gt;
&lt;span class="err"&gt;    },&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;id&amp;quot;: 3,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;showHeader&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;sortBy&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;        {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;desc&amp;quot;: false,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;displayName&amp;quot;: &amp;quot;Service&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;        ]&lt;/span&gt;
&lt;span class="err"&gt;    },&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;pluginVersion&amp;quot;: &amp;quot;7.5.5&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;targets&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;        {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;columns&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;selector&amp;quot;: &amp;quot;title&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;text&amp;quot;: &amp;quot;Service&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;selector&amp;quot;: &amp;quot;healthy&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;text&amp;quot;: &amp;quot;Value&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;selector&amp;quot;: &amp;quot;endpoint&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;text&amp;quot;: &amp;quot;URL&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        ],&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;data&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;filters&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;field&amp;quot;: &amp;quot;Value&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;operator&amp;quot;: &amp;quot;in&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;value&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            ]&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        ],&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;format&amp;quot;: &amp;quot;table&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;global_query_id&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;hide&amp;quot;: false,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;query_mode&amp;quot;: &amp;quot;standard&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;refId&amp;quot;: &amp;quot;A&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;root_selector&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;source&amp;quot;: &amp;quot;url&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;type&amp;quot;: &amp;quot;json&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;url&amp;quot;: &amp;quot;latest.json&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;url_options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;data&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;method&amp;quot;: &amp;quot;GET&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;    ],&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;title&amp;quot;: &amp;quot;Services KO&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;transformations&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;        {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;id&amp;quot;: &amp;quot;organize&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;excludeByName&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Value&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;endpoint&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;threshold&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;times&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;timestamp&amp;quot;: true&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;indexByName&amp;quot;: {},&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;renameByName&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;endpoint&amp;quot;: &amp;quot;URL&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;healthy&amp;quot;: &amp;quot;Statut&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;title&amp;quot;: &amp;quot;Service&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;    ],&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;type&amp;quot;: &amp;quot;table&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;    },&lt;/span&gt;
&lt;span class="err"&gt;    {&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;datasource&amp;quot;: &amp;quot;statuspage&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;description&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;fieldConfig&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;defaults&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;color&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;mode&amp;quot;: &amp;quot;thresholds&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;custom&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;align&amp;quot;: null,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;displayMode&amp;quot;: &amp;quot;color-text&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;filterable&amp;quot;: false&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;mappings&amp;quot;: [],&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;noValue&amp;quot;: &amp;quot;KO&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;thresholds&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;mode&amp;quot;: &amp;quot;absolute&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;steps&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;color&amp;quot;: &amp;quot;red&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;value&amp;quot;: null&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            ]&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;overrides&amp;quot;: []&lt;/span&gt;
&lt;span class="err"&gt;    },&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;gridPos&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;h&amp;quot;: 20,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;w&amp;quot;: 12,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;x&amp;quot;: 12,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;y&amp;quot;: 0&lt;/span&gt;
&lt;span class="err"&gt;    },&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;id&amp;quot;: 5,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;showHeader&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;sortBy&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;        {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;desc&amp;quot;: false,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;displayName&amp;quot;: &amp;quot;Service&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;        ]&lt;/span&gt;
&lt;span class="err"&gt;    },&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;pluginVersion&amp;quot;: &amp;quot;7.5.5&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;targets&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;        {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;columns&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;selector&amp;quot;: &amp;quot;title&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;text&amp;quot;: &amp;quot;Service&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;selector&amp;quot;: &amp;quot;healthy&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;text&amp;quot;: &amp;quot;Value&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;selector&amp;quot;: &amp;quot;endpoint&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;text&amp;quot;: &amp;quot;URL&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        ],&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;data&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;filters&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;field&amp;quot;: &amp;quot;Value&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;operator&amp;quot;: &amp;quot;in&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;value&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            ]&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        ],&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;format&amp;quot;: &amp;quot;table&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;global_query_id&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;hide&amp;quot;: false,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;query_mode&amp;quot;: &amp;quot;standard&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;refId&amp;quot;: &amp;quot;A&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;root_selector&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;source&amp;quot;: &amp;quot;url&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;type&amp;quot;: &amp;quot;json&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;url&amp;quot;: &amp;quot;maison.json&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;url_options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;data&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;method&amp;quot;: &amp;quot;GET&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;    ],&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;title&amp;quot;: &amp;quot;Maison KO&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;transformations&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;        {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;id&amp;quot;: &amp;quot;organize&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;excludeByName&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;Value&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;endpoint&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;threshold&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;times&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;timestamp&amp;quot;: true&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;indexByName&amp;quot;: {},&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;renameByName&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;endpoint&amp;quot;: &amp;quot;URL&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;healthy&amp;quot;: &amp;quot;Statut&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;title&amp;quot;: &amp;quot;Service&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;    ],&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;type&amp;quot;: &amp;quot;table&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;    },&lt;/span&gt;
&lt;span class="err"&gt;    {&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;collapsed&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;datasource&amp;quot;: null,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;gridPos&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;h&amp;quot;: 1,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;w&amp;quot;: 24,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;x&amp;quot;: 0,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;y&amp;quot;: 20&lt;/span&gt;
&lt;span class="err"&gt;    },&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;id&amp;quot;: 7,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;panels&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;        {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;datasource&amp;quot;: &amp;quot;statuspage&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;description&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;fieldConfig&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;defaults&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;color&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;mode&amp;quot;: &amp;quot;thresholds&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;custom&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;align&amp;quot;: null,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;displayMode&amp;quot;: &amp;quot;color-text&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;filterable&amp;quot;: false&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;mappings&amp;quot;: [],&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;noValue&amp;quot;: &amp;quot;KO&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;thresholds&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;mode&amp;quot;: &amp;quot;absolute&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;steps&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;color&amp;quot;: &amp;quot;green&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;value&amp;quot;: null&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;                ]&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;overrides&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;matcher&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;id&amp;quot;: &amp;quot;byName&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;options&amp;quot;: &amp;quot;Service&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                },&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;properties&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;id&amp;quot;: &amp;quot;custom.width&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;value&amp;quot;: 175&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;                ]&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            ]&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;gridPos&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;h&amp;quot;: 22,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;w&amp;quot;: 12,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;x&amp;quot;: 0,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;y&amp;quot;: 21&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;id&amp;quot;: 2,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;showHeader&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;sortBy&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;desc&amp;quot;: false,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;displayName&amp;quot;: &amp;quot;Service&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            ]&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;pluginVersion&amp;quot;: &amp;quot;7.5.5&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;targets&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;columns&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;selector&amp;quot;: &amp;quot;title&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;text&amp;quot;: &amp;quot;Service&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                },&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;selector&amp;quot;: &amp;quot;healthy&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;text&amp;quot;: &amp;quot;Value&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                },&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;selector&amp;quot;: &amp;quot;endpoint&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;text&amp;quot;: &amp;quot;URL&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;            ],&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;data&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;filters&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;field&amp;quot;: &amp;quot;Value&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;operator&amp;quot;: &amp;quot;notin&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;value&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                ]&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;            ],&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;format&amp;quot;: &amp;quot;table&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;global_query_id&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;hide&amp;quot;: false,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;query_mode&amp;quot;: &amp;quot;standard&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;refId&amp;quot;: &amp;quot;A&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;root_selector&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;source&amp;quot;: &amp;quot;url&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;type&amp;quot;: &amp;quot;json&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;url&amp;quot;: &amp;quot;latest.json&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;url_options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;data&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;method&amp;quot;: &amp;quot;GET&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        ],&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;title&amp;quot;: &amp;quot;Services OK&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;transformations&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;id&amp;quot;: &amp;quot;organize&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;excludeByName&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;Value&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;endpoint&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;threshold&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;times&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;timestamp&amp;quot;: true&lt;/span&gt;
&lt;span class="err"&gt;                },&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;indexByName&amp;quot;: {},&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;renameByName&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;endpoint&amp;quot;: &amp;quot;URL&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;healthy&amp;quot;: &amp;quot;Statut&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;title&amp;quot;: &amp;quot;Service&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        ],&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;type&amp;quot;: &amp;quot;table&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        {&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;datasource&amp;quot;: &amp;quot;statuspage&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;description&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;fieldConfig&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;defaults&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;color&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;mode&amp;quot;: &amp;quot;thresholds&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;custom&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;align&amp;quot;: null,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;displayMode&amp;quot;: &amp;quot;color-text&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;filterable&amp;quot;: false&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;mappings&amp;quot;: [],&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;noValue&amp;quot;: &amp;quot;KO&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;thresholds&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;mode&amp;quot;: &amp;quot;absolute&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;steps&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;color&amp;quot;: &amp;quot;green&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;value&amp;quot;: null&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;                ]&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            },&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;overrides&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;matcher&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;id&amp;quot;: &amp;quot;byName&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;options&amp;quot;: &amp;quot;Service&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                },&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;properties&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;id&amp;quot;: &amp;quot;custom.width&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;value&amp;quot;: 175&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;                ]&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            ]&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;gridPos&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;h&amp;quot;: 22,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;w&amp;quot;: 12,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;x&amp;quot;: 12,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;y&amp;quot;: 21&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;id&amp;quot;: 4,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;showHeader&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;sortBy&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;desc&amp;quot;: false,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;displayName&amp;quot;: &amp;quot;Service&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            ]&lt;/span&gt;
&lt;span class="err"&gt;        },&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;pluginVersion&amp;quot;: &amp;quot;7.5.5&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;targets&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;columns&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;selector&amp;quot;: &amp;quot;title&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;text&amp;quot;: &amp;quot;Service&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                },&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;selector&amp;quot;: &amp;quot;healthy&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;text&amp;quot;: &amp;quot;Value&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                },&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;selector&amp;quot;: &amp;quot;endpoint&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;text&amp;quot;: &amp;quot;URL&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;            ],&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;data&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;filters&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;field&amp;quot;: &amp;quot;Value&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;operator&amp;quot;: &amp;quot;notin&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;value&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;                    &amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                ]&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;            ],&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;format&amp;quot;: &amp;quot;table&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;global_query_id&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;hide&amp;quot;: false,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;query_mode&amp;quot;: &amp;quot;standard&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;refId&amp;quot;: &amp;quot;A&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;root_selector&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;source&amp;quot;: &amp;quot;url&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;type&amp;quot;: &amp;quot;json&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;url&amp;quot;: &amp;quot;maison.json&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;url_options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;data&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;method&amp;quot;: &amp;quot;GET&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        ],&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;title&amp;quot;: &amp;quot;Maison OK&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;transformations&amp;quot;: [&lt;/span&gt;
&lt;span class="err"&gt;            {&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;id&amp;quot;: &amp;quot;organize&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;            &amp;quot;options&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;excludeByName&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;Value&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;endpoint&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;threshold&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;times&amp;quot;: true,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;timestamp&amp;quot;: true&lt;/span&gt;
&lt;span class="err"&gt;                },&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;indexByName&amp;quot;: {},&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;renameByName&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;endpoint&amp;quot;: &amp;quot;URL&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;healthy&amp;quot;: &amp;quot;Statut&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;                &amp;quot;title&amp;quot;: &amp;quot;Service&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;                }&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;            }&lt;/span&gt;
&lt;span class="err"&gt;        ],&lt;/span&gt;
&lt;span class="err"&gt;        &amp;quot;type&amp;quot;: &amp;quot;table&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;        }&lt;/span&gt;
&lt;span class="err"&gt;    ],&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;title&amp;quot;: &amp;quot;OK&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;type&amp;quot;: &amp;quot;row&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;    }&lt;/span&gt;
&lt;span class="err"&gt;],&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;schemaVersion&amp;quot;: 27,&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;style&amp;quot;: &amp;quot;dark&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;tags&amp;quot;: [],&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;templating&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;list&amp;quot;: []&lt;/span&gt;
&lt;span class="err"&gt;},&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;time&amp;quot;: {&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;from&amp;quot;: &amp;quot;now-5m&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;    &amp;quot;to&amp;quot;: &amp;quot;now&amp;quot;&lt;/span&gt;
&lt;span class="err"&gt;},&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;timepicker&amp;quot;: {},&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;timezone&amp;quot;: &amp;quot;&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;title&amp;quot;: &amp;quot;Status Page&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;uid&amp;quot;: &amp;quot;IERYjr9Mk&amp;quot;,&lt;/span&gt;
&lt;span class="err"&gt;&amp;quot;version&amp;quot;: 12&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;Capture d'écran du dashboard final&lt;/h3&gt;
&lt;p&gt;&lt;img alt="Dashboard Grafana, où il y a quatre panels : deux sont vides, et remontent les services KO, et deux autres sont pleins, et donnent la liste des services fonctionnant correctement" src="https://maxime.sourdin.ovh/medias/checkup-grafana-1.png"&gt;&lt;/p&gt;
&lt;h3&gt;Capture d'écran d'un mail d'alerte&lt;/h3&gt;
&lt;p&gt;&lt;img alt="Mail d'alerte : &amp;quot;Checkup has detected the following issues: Autoblog - Status degraded, Kanboard - Status degraded, Notes - Status degraded, Wallabag - Status degraded " src="https://maxime.sourdin.ovh/medias/checkup-grafana-3.png"&gt;&lt;/p&gt;
&lt;h3&gt;Capture d'écran d'une alerte sur Discord&lt;/h3&gt;
&lt;p&gt;&lt;img alt="Messages Discord : Notes (Status DEGRADED) et Wallabag (Status DEGRADED)" src="https://maxime.sourdin.ovh/medias/checkup-grafana-4.png"&gt;&lt;/p&gt;
&lt;h1&gt;Fichier docker-compose final&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;3&amp;#39;&lt;/span&gt;
  &lt;span class="n"&gt;grafana&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;grafana&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;grafana&lt;/span&gt;
    &lt;span class="n"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;grafana&lt;/span&gt;
    &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;UID:UID&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;always&lt;/span&gt;
    &lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;grafana&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;grafana&lt;/span&gt;
    &lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;monitoring&lt;/span&gt;
    &lt;span class="n"&gt;healthcheck&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;curl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="mf"&gt;127.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3000&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;exit&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
      &lt;span class="n"&gt;interval&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
      &lt;span class="n"&gt;retries&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
 &lt;span class="n"&gt;prometheus&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;prom&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;prometheus&lt;/span&gt;
    &lt;span class="n"&gt;container_name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;prometheus&lt;/span&gt;
    &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;UID:UID&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;always&lt;/span&gt;
    &lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;prometheus&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;prometheus&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;prometheus&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;prometheus&lt;/span&gt;
    &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--config.file=/etc/prometheus/prometheus.yml&amp;#39;&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--storage.tsdb.path=/prometheus&amp;#39;&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--web.console.libraries=/etc/prometheus/console_libraries&amp;#39;&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--web.console.templates=/etc/prometheus/consoles&amp;#39;&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;--storage.tsdb.retention=200h&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;monitoring&lt;/span&gt;
    &lt;span class="n"&gt;healthcheck&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;test&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;curl&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="mf"&gt;127.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;9090&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;exit&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
      &lt;span class="n"&gt;interval&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;
      &lt;span class="n"&gt;retries&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
 &lt;span class="n"&gt;checkup&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;hostname&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;checkup&lt;/span&gt;
    &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;monrepodocker&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;checkup&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;latest&lt;/span&gt;
    &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;UID:UID&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;volumes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
     &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;checkup&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;checkup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;checkup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ro&lt;/span&gt;
     &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="o"&gt;./&lt;/span&gt;&lt;span class="n"&gt;checkup&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;checks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;checks&lt;/span&gt;
    &lt;span class="n"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;always&lt;/span&gt;
&lt;span class="n"&gt;networks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;monitoring&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;driver&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;bridge&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Supervision"></category><category term="Grafana"></category></entry><entry><title>MSMTP OVH</title><link href="https://maxime.sourdin.ovh/msmtp-ovh.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/msmtp-ovh.html</id><summary type="html">&lt;p&gt;Configuration simple d'un MTA&lt;/p&gt;</summary><content type="html">&lt;p&gt;Installer msmtp&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo apt install -y msmtp&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Dans /etc/msmtprc&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;account default&lt;/span&gt;
&lt;span class="err"&gt;tls_starttls off&lt;/span&gt;
&lt;span class="err"&gt;tls on&lt;/span&gt;
&lt;span class="err"&gt;tls_trust_file /etc/ssl/certs/ca-certificates.crt&lt;/span&gt;
&lt;span class="err"&gt;logfile        ~/.msmtp.log&lt;/span&gt;
&lt;span class="err"&gt;host ssl0.ovh.net&lt;/span&gt;
&lt;span class="err"&gt;port 465&lt;/span&gt;
&lt;span class="err"&gt;from postmaster@monmail.ovh&lt;/span&gt;
&lt;span class="err"&gt;auth on&lt;/span&gt;
&lt;span class="err"&gt;user postmaster@monmail.ovh&lt;/span&gt;
&lt;span class="err"&gt;password UnMotDePasseTresComplique&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Mails"></category><category term="MTA"></category></entry><entry><title>Nettoyage d'une instance Mastodon</title><link href="https://maxime.sourdin.ovh/nettoyage-dune-instance-mastodon.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/nettoyage-dune-instance-mastodon.html</id><summary type="html">&lt;p&gt;Economiser un peu d'espace sur son instance&lt;/p&gt;</summary><content type="html">&lt;p&gt;1- Nettoyage du cache&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;RAILS_ENV=production bin/tootctl cache clear&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;2- Nettoyage des médias orphelins   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;RAILS_ENV=production  bin/tootctl media remove-orphans&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;3- Nettoyage des médias vieux de 3 mois (par défaut)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;RAILS_ENV=production  bin/tootctl media remove&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;4- Nettoyage des comptes inactifs&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;RAILS_ENV=production  bin/tootctl accounts cull&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Autohébergement"></category><category term="Mastodon"></category></entry><entry><title>One-liner pour Trivy</title><link href="https://maxime.sourdin.ovh/one-liner-pour-trivy.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/one-liner-pour-trivy.html</id><summary type="html">&lt;p&gt;Scanner rapidement toutes ses images Docker&lt;/p&gt;</summary><content type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;image&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;docker&lt;/span&gt; &lt;span class="n"&gt;image&lt;/span&gt; &lt;span class="n"&gt;ls&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;awk&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;{print $1,$2}&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;sed&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;s/ /:/g&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;sed&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/REPOSITORY:TAG/d&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;do&lt;/span&gt; &lt;span class="n"&gt;docker&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;rm&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;docker&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sock&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;docker&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sock&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;caches&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;/.&lt;/span&gt;&lt;span class="n"&gt;cache&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;aquasec&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;trivy&lt;/span&gt; &lt;span class="o"&gt;$&lt;/span&gt;&lt;span class="n"&gt;image&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Sécurité"></category><category term="Trivy"></category></entry><entry><title>Optimisation de Windows 10</title><link href="https://maxime.sourdin.ovh/optimisation-de-windows-10.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/optimisation-de-windows-10.html</id><summary type="html">&lt;p&gt;Quelques commandes utiles pour gérer et nettoyer Windows&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Gestion de l'alimentation&lt;/h2&gt;
&lt;p&gt;Ultimate Performance:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;powercfg -duplicatescheme e9a42b02-d5df-448d-aa00-03f14749eb61&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;High Performance:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;powercfg -duplicatescheme 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Balanced:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;powercfg -duplicatescheme 381b4222-f694-41f0-9685-ff5bb260df2e&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Power saver:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;powercfg -duplicatescheme a1841308-3541-4fab-bc81-f71556f20b4a&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Domaine Windows&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;@echo off&lt;/span&gt;
&lt;span class="err"&gt;NETDOM JOIN %computername% /domain:DOMAINE /userD:USER /passwordD:MOTDEPASSE&lt;/span&gt;
&lt;span class="err"&gt;del domaine.bat&lt;/span&gt;
&lt;span class="err"&gt;shutdown -r -f -t 0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Clean&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;rem&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Disable&lt;/span&gt; &lt;span class="n"&gt;Some&lt;/span&gt; &lt;span class="n"&gt;Service&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;stop&lt;/span&gt; &lt;span class="n"&gt;DiagTrack&lt;/span&gt;
&lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;stop&lt;/span&gt; &lt;span class="n"&gt;diagnosticshub&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;standardcollector&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt;
&lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;stop&lt;/span&gt; &lt;span class="n"&gt;dmwappushservice&lt;/span&gt;
&lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;stop&lt;/span&gt; &lt;span class="n"&gt;WMPNetworkSvc&lt;/span&gt;
&lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;stop&lt;/span&gt; &lt;span class="n"&gt;WSearch&lt;/span&gt;

&lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;DiagTrack&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;
&lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;diagnosticshub&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;standardcollector&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;
&lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;dmwappushservice&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;RemoteRegistry&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt;
&lt;span class="n"&gt;TrkWks&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;
&lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;WMPNetworkSvc&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;
&lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;WSearch&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;sc&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="n"&gt;SysMain&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;

&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;SCHEDULED&lt;/span&gt; &lt;span class="n"&gt;TASKS&lt;/span&gt; &lt;span class="n"&gt;tweaks&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\AppID\SmartScreenSpecific&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Application Experience\Microsoft Compatibility Appraiser&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Application Experience\ProgramDataUpdater&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Application Experience\StartupAppTask&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Customer Experience Improvement Program\Consolidator&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Customer Experience Improvement Program\KernelCeipTask&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Customer Experience Improvement ProgramsbCeip&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Customer Experience Improvement Programploader&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Shell\FamilySafetyUpload&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Office\OfficeTelemetryAgentLogOn&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Office\OfficeTelemetryAgentFallBack&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Office\Office 15 Subscription Heartbeat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;

&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Autochk\Proxy&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\CloudExperienceHost\CreateObjectTask&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\DiskDiagnostic\Microsoft-Windows-DiskDiagnosticDataCollector&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\DiskFootprint\Diagnostics&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Not&lt;/span&gt; &lt;span class="n"&gt;sure&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;should&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;disabled&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;maybe&lt;/span&gt; &lt;span class="n"&gt;related&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;S&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\FileHistory\File History (maintenance mode)&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Maintenance\WinSAT&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\NetTrace\GatherNetworkInfo&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\PI\Sqm-Tasks&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;The&lt;/span&gt; &lt;span class="n"&gt;stubborn&lt;/span&gt; &lt;span class="n"&gt;task&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;\&lt;span class="n"&gt;Windows&lt;/span&gt;\&lt;span class="n"&gt;SettingSync&lt;/span&gt;\&lt;span class="n"&gt;BackgroundUploadTask&lt;/span&gt; &lt;span class="n"&gt;can&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt;
&lt;span class="n"&gt;Disabled&lt;/span&gt; &lt;span class="n"&gt;using&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;simple&lt;/span&gt; &lt;span class="n"&gt;bit&lt;/span&gt; &lt;span class="n"&gt;change&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;I&lt;/span&gt; &lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;REG&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;that&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;attached&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;this&lt;/span&gt; &lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Time Synchronization\ForceSynchronizeTime&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Time Synchronization\SynchronizeTime&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\Windows Error Reporting\QueueReporting&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;schtasks&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;TN&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Microsoft\Windows\WindowsUpdate\Automatic App Update&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;Disable&lt;/span&gt; &lt;span class="n"&gt;REM&lt;/span&gt; 
&lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Remove&lt;/span&gt; &lt;span class="n"&gt;Cortana&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;Currently&lt;/span&gt; &lt;span class="n"&gt;MS&lt;/span&gt; &lt;span class="n"&gt;doesn&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;t allow to uninstall Cortana using the above step claiming it&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;required&lt;/span&gt; &lt;span class="n"&gt;OS&lt;/span&gt; &lt;span class="n"&gt;component&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hahWe&lt;/span&gt; &lt;span class="n"&gt;will&lt;/span&gt; &lt;span class="n"&gt;have&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;rename&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;Cortana&lt;/span&gt; &lt;span class="n"&gt;App&lt;/span&gt; &lt;span class="n"&gt;folder&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;.bak&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;its&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;but&lt;/span&gt; &lt;span class="n"&gt;this&lt;/span&gt; &lt;span class="n"&gt;can&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt; &lt;span class="n"&gt;only&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;Cortana&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;running&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;The&lt;/span&gt; &lt;span class="n"&gt;issue&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;that&lt;/span&gt; &lt;span class="n"&gt;when&lt;/span&gt; &lt;span class="n"&gt;Cortana&lt;/span&gt; &lt;span class="n"&gt;process&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchUI&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;killed&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="n"&gt;respawns&lt;/span&gt; &lt;span class="n"&gt;very&lt;/span&gt; &lt;span class="n"&gt;quickly&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;So&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;following&lt;/span&gt; &lt;span class="n"&gt;code&lt;/span&gt; &lt;span class="n"&gt;needs&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;quick&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt; &lt;span class="n"&gt;we&lt;/span&gt; &lt;span class="n"&gt;can&lt;/span&gt; &lt;span class="n"&gt;manage&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;rename&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;folder&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;Disabling&lt;/span&gt; &lt;span class="n"&gt;Cortana&lt;/span&gt; &lt;span class="n"&gt;this&lt;/span&gt; &lt;span class="n"&gt;way&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt; &lt;span class="mi"&gt;1703&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RS2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;will&lt;/span&gt; &lt;span class="n"&gt;render&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;Start&lt;/span&gt; &lt;span class="n"&gt;Menu&lt;/span&gt; &lt;span class="n"&gt;unavailable&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;So&lt;/span&gt; &lt;span class="n"&gt;this&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;commented&lt;/span&gt; &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="n"&gt;until&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;better&lt;/span&gt; &lt;span class="n"&gt;solution&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;found&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;taskkill&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;IM&lt;/span&gt; &lt;span class="n"&gt;SearchUI&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exe&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;move&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;%windir%\SystemApps\Microsoft.Windows.Cortana_cw5n1h2txyewy&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;%windir%\SystemApps\Microsoft.Windows.Cortana_cw5n1h2txyewy.bak&amp;quot;&lt;/span&gt;

&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;rem&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Remove&lt;/span&gt; &lt;span class="n"&gt;Telemetry&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;Data&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Device Metadata&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;PreventDeviceMetadataFromNetwork&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\DataCollection&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;AllowTelemetry&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SOFTWARE\Policies\Microsoft\MRT&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;DontOfferThroughWUAU&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SOFTWARE\Policies\Microsoft\SQMClient\Windows&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;CEIPEnable&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SOFTWARE\Policies\Microsoft\Windows\AppCompat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;AITEnable&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SOFTWARE\Policies\Microsoft\Windows\AppCompat&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;DisableUAR&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SOFTWARE\Policies\Microsoft\Windows\DataCollection&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;AllowTelemetry&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SYSTEM\CurrentControlSet\Control\WMI\AutoLogger\AutoLogger-Diagtrack-Listener&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Start&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SYSTEM\CurrentControlSet\Control\WMI\AutoLogger\SQMLogger&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Start&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;

&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;Settings&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Privacy&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;General&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Let&lt;/span&gt; &lt;span class="n"&gt;apps&lt;/span&gt; &lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;my&lt;/span&gt; &lt;span class="n"&gt;advertising&lt;/span&gt; &lt;span class="n"&gt;ID&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\AdvertisingInfo&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;Enabled&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;SmartScreen&lt;/span&gt; &lt;span class="n"&gt;Filter&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;Store&lt;/span&gt; &lt;span class="n"&gt;Apps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\AppHost&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;EnableWebContentEvaluation&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;Let&lt;/span&gt; &lt;span class="n"&gt;websites&lt;/span&gt; &lt;span class="n"&gt;provide&lt;/span&gt; &lt;span class="n"&gt;locally&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKCU\Control Panel\Internationalser Profile&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;HttpAcceptLanguageOptOut&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;

&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;WiFi&lt;/span&gt; &lt;span class="n"&gt;Sense&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;HotSpot&lt;/span&gt; &lt;span class="n"&gt;Sharing&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\Software\Microsoft\PolicyManager\default\WiFi\AllowWiFiHotSpotReporting&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;WiFi&lt;/span&gt; &lt;span class="n"&gt;Sense&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Shared&lt;/span&gt; &lt;span class="n"&gt;HotSpot&lt;/span&gt; &lt;span class="n"&gt;Auto&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Connect&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Disable&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\Software\Microsoft\PolicyManager\default\WiFi\AllowAutoConnectToWiFiSenseHotspots&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;

&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;Change&lt;/span&gt; &lt;span class="n"&gt;Windows&lt;/span&gt; &lt;span class="n"&gt;Updates&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Notify to schedule restart&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SOFTWARE\Microsoft\WindowsUpdateX\Settings&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;UxOption&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;
&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;Disable&lt;/span&gt; &lt;span class="n"&gt;P2P&lt;/span&gt; &lt;span class="n"&gt;Update&lt;/span&gt; &lt;span class="n"&gt;downlods&lt;/span&gt; &lt;span class="n"&gt;outside&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;local&lt;/span&gt; &lt;span class="n"&gt;network&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\DeliveryOptimization\Config&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;DODownloadMode&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;

&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;REM&lt;/span&gt;
&lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Disable&lt;/span&gt; &lt;span class="n"&gt;Cortana&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;Telemetry&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKLM\SOFTWARE\Policies\Microsoft\Windows\Windows Search&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;AllowCortana&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Hide&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;search&lt;/span&gt; &lt;span class="n"&gt;box&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="n"&gt;taskbar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;You&lt;/span&gt; &lt;span class="n"&gt;can&lt;/span&gt; &lt;span class="n"&gt;still&lt;/span&gt; &lt;span class="n"&gt;search&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="n"&gt;pressing&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;Win&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="n"&gt;typing&lt;/span&gt; &lt;span class="n"&gt;what&lt;/span&gt; &lt;span class="n"&gt;you&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;re looking for ***&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;hide&lt;/span&gt; &lt;span class="n"&gt;completely&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;show&lt;/span&gt; &lt;span class="n"&gt;only&lt;/span&gt; &lt;span class="n"&gt;icon&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;show&lt;/span&gt; &lt;span class="n"&gt;long&lt;/span&gt; &lt;span class="n"&gt;search&lt;/span&gt; &lt;span class="n"&gt;box&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\Search&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;SearchboxTaskbarMode&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;

&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Disable&lt;/span&gt; &lt;span class="n"&gt;MRU&lt;/span&gt; &lt;span class="n"&gt;lists&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jump&lt;/span&gt; &lt;span class="n"&gt;lists&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;XAML&lt;/span&gt; &lt;span class="n"&gt;apps&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;Start&lt;/span&gt; &lt;span class="n"&gt;Menu&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Advanced&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Start_TrackDocs&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;

&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Set&lt;/span&gt; &lt;span class="n"&gt;Windows&lt;/span&gt; &lt;span class="n"&gt;Explorer&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;This&lt;/span&gt; &lt;span class="n"&gt;PC&lt;/span&gt; &lt;span class="n"&gt;instead&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;Quick&lt;/span&gt; &lt;span class="n"&gt;Access&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;This&lt;/span&gt; &lt;span class="n"&gt;PC&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Quick&lt;/span&gt; &lt;span class="n"&gt;access&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Advanced&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;LaunchTo&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;

&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Disable&lt;/span&gt; &lt;span class="n"&gt;Suggestions&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;Start&lt;/span&gt; &lt;span class="n"&gt;Menu&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\ContentDeliveryManager&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;SystemPaneSuggestionsEnabled&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;

&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;rem&lt;/span&gt; &lt;span class="n"&gt;Remove&lt;/span&gt; &lt;span class="n"&gt;Apps&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *3DBuilder* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *Cortana* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *Getstarted* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *WindowsAlarms* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *WindowsCamera* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *bing* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *MicrosoftOfficeHub* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *OneNote* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *people* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *WindowsPhone* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *photos* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *SkypeApp* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *solit* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *WindowsSoundRecorder* | Rem&lt;/span&gt;

&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *zune*| Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *WindowsCalculator* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *WindowsMaps* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *Sway* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *CommsPhone* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *ConnectivityStore* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *Microsoft.Messaging* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *ContentDeliveryManager* | Remove-AppxPackage&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;PowerShell&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Command&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Get-AppxPackage *Microsoft.WindowsStore* | Remove-AppxPackage&amp;quot;&lt;/span&gt;


&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;rem&lt;/span&gt; &lt;span class="n"&gt;NOW&lt;/span&gt; &lt;span class="n"&gt;JUST&lt;/span&gt; &lt;span class="n"&gt;SOME&lt;/span&gt; &lt;span class="n"&gt;TWEAKS&lt;/span&gt;
&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Show&lt;/span&gt; &lt;span class="n"&gt;super&lt;/span&gt; &lt;span class="n"&gt;hidden&lt;/span&gt; &lt;span class="n"&gt;system&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;Explorer&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Advanced&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ShowSuperHidden&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;

&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Show&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="n"&gt;extensions&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;Explorer&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Advanced&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HideFileExt&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;  &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;


&lt;span class="n"&gt;REM&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt; &lt;span class="n"&gt;Uninstall&lt;/span&gt; &lt;span class="n"&gt;OneDrive&lt;/span&gt; &lt;span class="o"&gt;***&lt;/span&gt;
&lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;wait&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;%SYSTEMROOT%\SYSWOW64\ONEDRIVESETUP.EXE&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;UNINSTALL&lt;/span&gt;
&lt;span class="n"&gt;rd&lt;/span&gt; &lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;OneDriveTemp&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Q&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;NUL&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;rd&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;%USERPROFILE%\OneDrive&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Q&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;NUL&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;rd&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;%LOCALAPPDATA%\Microsoft\OneDrive&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Q&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;NUL&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;rd&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;%PROGRAMDATA%\Microsoft OneDrive&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Q&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;NUL&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKEY_CLASSES_ROOT\CLSID\{018D5C66-4533-4307-9B53-224DE2ED1FE6}\ShellFolder&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;Attributes&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;NUL&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;reg&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;HKEY_CLASSES_ROOT\Wow6432Node\CLSID\{018D5C66-4533-4307-9B53-224DE2ED1FE6}\ShellFolder&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="n"&gt;Attributes&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;REG_DWORD&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;NUL&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;amp;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;echo&lt;/span&gt; &lt;span class="n"&gt;OneDrive&lt;/span&gt; &lt;span class="n"&gt;has&lt;/span&gt; &lt;span class="n"&gt;been&lt;/span&gt; &lt;span class="n"&gt;removed&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Windows&lt;/span&gt; &lt;span class="n"&gt;Explorer&lt;/span&gt; &lt;span class="n"&gt;needs&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt; &lt;span class="n"&gt;restarted&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;pause&lt;/span&gt;
&lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;wait&lt;/span&gt; &lt;span class="n"&gt;TASKKILL&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;F&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;IM&lt;/span&gt; &lt;span class="n"&gt;explorer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exe&lt;/span&gt;
&lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="n"&gt;explorer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exe&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="OS"></category><category term="Windows"></category></entry><entry><title>Proxy APT</title><link href="https://maxime.sourdin.ovh/proxy-apt.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/proxy-apt.html</id><summary type="html">&lt;p&gt;Utiliser un proxy&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Pour APT&lt;/h1&gt;
&lt;p&gt;Dans &lt;strong&gt;/etc/apt.conf:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Rajouter:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;Acquire::http::Proxy &amp;quot;http://172.16.1.8:9999&amp;quot;;&lt;/span&gt;
&lt;span class="c"&gt;Acquire::https::proxy &amp;quot;https://10.0.0.46:3128/&amp;quot;;&lt;/span&gt;
&lt;span class="c"&gt;Acquire::ftp::proxy &amp;quot;ftp://10.0.0.46:3128/&amp;quot;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ou modifier directement les sources.list&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://172.16.1.8:9999/deb.debian.org/debian/&lt;/span&gt; &lt;span class="kp"&gt;buster&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;contrib&lt;/span&gt; &lt;span class="kp"&gt;non-free&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://172.16.1.8:9999/security.debian.org/debian-security&lt;/span&gt; &lt;span class="kp"&gt;buster/updates&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;contrib&lt;/span&gt; &lt;span class="kp"&gt;non-free&lt;/span&gt;

&lt;span class="k"&gt;deb&lt;/span&gt; &lt;span class="s"&gt;http://172.16.1.8:9999/deb.debian.org/debian/&lt;/span&gt; &lt;span class="kp"&gt;buster-updates&lt;/span&gt; &lt;span class="kp"&gt;main&lt;/span&gt; &lt;span class="kp"&gt;contrib&lt;/span&gt; &lt;span class="kp"&gt;non-free&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h1&gt;Pour le shell&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;export&lt;/span&gt; &lt;span class="n"&gt;http_proxy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;http://10.0.0.6:3128/&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;export&lt;/span&gt; &lt;span class="n"&gt;https_proxy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;http://10.0.0.6:3128/&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;export&lt;/span&gt; &lt;span class="n"&gt;ftp_proxy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;http://10.0.0.6:3128/&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;export&lt;/span&gt; &lt;span class="n"&gt;no_proxy&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;127.0.0.1,localhost&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Réseau"></category><category term="Proxies"></category></entry><entry><title>Quelques grok patterns</title><link href="https://maxime.sourdin.ovh/quelques-grok-patterns.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/quelques-grok-patterns.html</id><summary type="html">&lt;p&gt;Grok pattern pour HaProxy et Syslog&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Grok pattern haproxy&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;%{SYSLOGTIMESTAMP:timestamp}.* %{DATA:Haproxy_process}: %{IP:client_ip}.*\[%{HAPROXYDATE:accept_date}\] %{NOTSPACE:frontend_name} %{NOTSPACE:backend_name}/%{NOTSPACE:server_name} %{INT:Tq}/%{INT:Tw}/%{INT:Tc}/%{INT:Tr}/%{INT:Tt} %{DATA:http_status_code} %{NOTSPACE:bytes_read} - - ---- %{INT:actconn}/%{INT:feconn&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="c"&gt;%{INT:beconn}/%{INT:srvconn}/%{NOTSPACE:retries} %{INT:srv_queue}/%{INT:backend_queue} &amp;quot;%{WORD:Method} %{URIPATHPARAM:request} HTTP/%{NUMBER:http_version}&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Grok pattern syslog&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;%{SYSLOGTIMESTAMP:syslog_timestamp} %{IP:server_ip} %{PROG:program}(?:\[%{POSINT:pid}\])?(?=%{GREEDYDATA:syslog_message})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Logs"></category><category term="HaProxy"></category></entry><entry><title>Récupérer une archive tar gz corrumpue</title><link href="https://maxime.sourdin.ovh/recuperer-une-archive-tar-gz-corrumpue.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/recuperer-une-archive-tar-gz-corrumpue.html</id><summary type="html">&lt;p&gt;Sauvetage de données archivées avec tar.gz&lt;/p&gt;</summary><content type="html">&lt;p&gt;Récupération  de gzrecover:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;git clone https://github.com/arenn/gzrt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Compilation:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;cd gzrt&lt;/span&gt;
&lt;span class="err"&gt;make&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Installation:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo cp gzrecover /usr/bin/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Utilisation:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;gzrecover lycee.tar.gz&lt;/span&gt;
&lt;span class="err"&gt;cpio -F lycee.tar.recovered -i -v&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Archivage"></category><category term="Sauvetage"></category></entry><entry><title>Redimensionner un disque chiffré sous OpenMediaVault (virtualisé sous Proxmox)</title><link href="https://maxime.sourdin.ovh/redimensionner-un-disque-chiffre-sous-openmediavault-virtualise-sous-proxmox.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/redimensionner-un-disque-chiffre-sous-openmediavault-virtualise-sous-proxmox.html</id><summary type="html">&lt;p&gt;Agrandissement de disques virtuels chiffrés&lt;/p&gt;</summary><content type="html">&lt;p&gt;1- agrandir le disque virtuel sous proxmox, en cherchant dans les paramètres d'OpenMediaVault le bon disque. Il faut se baser sur le numéro alloué au port SCSI, si vous avez plusieurs disques avec un espace alloué similaire.&lt;/p&gt;
&lt;p&gt;2- Il faut démonter la partition pour pouvoir l'agrandir&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;    sudo systemctl restart smbd&lt;/span&gt;
&lt;span class="err"&gt;    sudo umount /srv/dev-disk-by-label-unpartage&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;3- On verrouille le disque:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;     sudo cryptsetup luksClose /dev/mapper/sde-crypt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;4- On peut maintenant le déverouiller avec l'interface web d'OMV et le remonter (rien n'emp^êêche de le faire en ligne de commandes évidemment).&lt;/p&gt;
&lt;p&gt;5- Enfin, il faut redimensionner le syst  me de fichiers sur le disque chiffr  :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;    sudo resize2fs -p /dev/mapper/sdg-crypt&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Multimédia"></category><category term="OpenMediaVault"></category></entry><entry><title>Rickroller les scanneurs de sites et de serveurs</title><link href="https://maxime.sourdin.ovh/rickroller-les-scanneurs-de-sites-et-de-serveurs.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/rickroller-les-scanneurs-de-sites-et-de-serveurs.html</id><summary type="html">&lt;p&gt;Une redirection blagueuse des pages d'erreurs&lt;/p&gt;</summary><content type="html">&lt;p&gt;Il y a juste un fichier de configuration Nginx à éditer:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nt"&gt;sudo&lt;/span&gt; &lt;span class="nt"&gt;nano&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;snippets&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rickroll&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;conf&lt;/span&gt;

&lt;span class="nt"&gt;error_page&lt;/span&gt; &lt;span class="nt"&gt;404&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;301&lt;/span&gt; &lt;span class="nt"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="nt"&gt;youtu&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;be&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;dQw4w9WgXcQ&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;44&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="nt"&gt;error_page&lt;/span&gt; &lt;span class="nt"&gt;500&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;301&lt;/span&gt; &lt;span class="nt"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="nt"&gt;youtu&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;be&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;dQw4w9WgXcQ&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;44&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="nt"&gt;error_page&lt;/span&gt; &lt;span class="nt"&gt;501&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;301&lt;/span&gt; &lt;span class="nt"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="nt"&gt;youtu&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;be&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;dQw4w9WgXcQ&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;44&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="nt"&gt;error_page&lt;/span&gt; &lt;span class="nt"&gt;502&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;301&lt;/span&gt; &lt;span class="nt"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="nt"&gt;youtu&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;be&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;dQw4w9WgXcQ&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;44&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="nt"&gt;error_page&lt;/span&gt; &lt;span class="nt"&gt;503&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;301&lt;/span&gt; &lt;span class="nt"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="nt"&gt;youtu&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;be&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;dQw4w9WgXcQ&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;44&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="nt"&gt;error_page&lt;/span&gt; &lt;span class="nt"&gt;504&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;301&lt;/span&gt; &lt;span class="nt"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="nt"&gt;youtu&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;be&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;dQw4w9WgXcQ&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="nt"&gt;t&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nt"&gt;44&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Pensez à l'intégrer dans votre configuration Nginx:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;    &lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;nano&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;snippets&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;monsite&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt;

&lt;span class="n"&gt;include&lt;/span&gt; &lt;span class="p"&gt;..&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;snippets&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rickroll&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Et ensuite,  Nginx doit être redémarré:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;sudo  systemctl restart nginx&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Hardening"></category><category term="Shitpost"></category></entry><entry><title>Sauvegarde avec tar et la crontab</title><link href="https://maxime.sourdin.ovh/sauvegarde-avec-tar-et-la-crontab.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/sauvegarde-avec-tar-et-la-crontab.html</id><summary type="html">&lt;p&gt;Automatisation d'une sauvegarde sous OpenMediaVault&lt;/p&gt;</summary><content type="html">&lt;p&gt;Edition de la crontab:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;crontab -e&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Ajout de deux lignes: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;SHELL=/bin/bash&lt;/span&gt;
&lt;span class="err"&gt;@weekly tar cfz /srv/27374c9b-38ee-44f9-ac29-8e528c797b92/backup/mediasmaxime/$(date +&amp;quot;%m-%d-%y&amp;quot;).tar.gz /srv/dev-disk-by-label-MediasMaxime/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;SHELL spécifie bash comme shell (sinon la commande ne s'éxécute pas).&lt;/p&gt;
&lt;p&gt;'tar cfz' compresse le dossier en .tar.gz, avec gunzip.&lt;/p&gt;
&lt;p&gt;Encore mieux, des backups chiffrées (pensez à générer des clés gpg, avec une passphrase svp !!!!)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;tar -c -f - /root/scripts/* | gpg --pinentry-mode loopback --passphrase-file /root/.gpgkey  -o /mnt/data/Backup/truenas/scripts-$(date +&amp;quot;%m-%d-%y&amp;quot;).tar.gz -c&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Sauvegarde"></category><category term="OpenMediaVault"></category></entry><entry><title>Serveur Minecraft allégé</title><link href="https://maxime.sourdin.ovh/serveur-minecraft-allege.html" rel="alternate"></link><published>2022-07-03T18:00:00+02:00</published><updated>2022-07-03T18:00:00+02:00</updated><author><name>Maxime SOURDIN</name></author><id>tag:maxime.sourdin.ovh,2022-07-03:/serveur-minecraft-allege.html</id><summary type="html">&lt;p&gt;Quelques commandes pour lancer Minecraft en mode allégé&lt;/p&gt;</summary><content type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;java&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UnlockExperimentalVMOptions&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;CompileThreshold&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;752253&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;TieredCompilatnion&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UseStringCache&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;OptimizeStringConcat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UseBiansedLocking&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Xnoclassgc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UseFastAccessorMethods&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UseConmpressedOops&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UseG1GC&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;NewSize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;624&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;MaxNewSize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;624&lt;/span&gt;&lt;span class="n"&gt;nm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;MaxGCPauseMillis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;G1HeapRegionSize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;128&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;G1HeapnWastePercent&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;InitiatingHeapOccupancyPercent&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;69&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;Survin&lt;/span&gt;

&lt;span class="n"&gt;java&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UnlockExperimentalVMOptions&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UseStringCache&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;OptimizeStringConcat&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UseBiasedLocking&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Xnoclassgc&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UseFastAccessorMethods&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;UseCompressedOops&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;ParallelGCThreads&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Xms3000m&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Xmx5000m&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;XX&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;PermSize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;304&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content><category term="Jeux"></category><category term="Minecraft"></category></entry></feed>